var Zepto=function(){function u(t){return null==t?String(t):B[U.call(t)]||"object"}function a(t){return"function"==u(t)}function o(t){return null!=t&&t==t.window}function s(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function i(t){return"object"==u(t)}function c(t){return i(t)&&!o(t)&&Object.getPrototypeOf(t)==Object.prototype}function l(t){return"number"==typeof t.length}function r(t){return A.call(t,function(t){return null!=t})}function f(t){return 0<t.length?T.fn.concat.apply([],t):t}function h(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function n(t){return t in e?e[t]:e[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function p(t,e){return"number"!=typeof e||$[h(t)]?e:e+"px"}function t(t){var e,n;return Z[t]||(e=L.createElement(t),L.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),Z[t]=n),Z[t]}function d(t){return"children"in t?O.call(t.children):T.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function m(t,e,n){for(j in e)n&&(c(e[j])||G(e[j]))?(c(e[j])&&!c(t[j])&&(t[j]={}),G(e[j])&&!G(t[j])&&(t[j]=[]),m(t[j],e[j],n)):e[j]!==E&&(t[j]=e[j])}function v(t,e){return null==e?T(t):T(t).filter(e)}function g(t,e,n,i){return a(e)?e.call(t,n,i):e}function y(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function x(t,e){var n=t.className,i=n&&n.baseVal!==E;if(e===E)return i?n.baseVal:n;i?n.baseVal=e:t.className=e}function b(t){var e;try{return t?"true"==t||"false"!=t&&("null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?T.parseJSON(t):t:e):t}catch(n){return t}}function w(t,e){e(t);for(var n=0,i=t.childNodes.length;n<i;n++)w(t.childNodes[n],e)}var E,j,T,C,S,N,P=[],O=P.slice,A=P.filter,L=window.document,Z={},e={},$={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},_=/^\s*<(\w+|!)[^>]*>/,D=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,z=/^(?:body|html)$/i,M=/([A-Z])/g,R=["val","css","html","text","data","width","height","offset"],F=["after","prepend","before","append"],q=L.createElement("table"),H=L.createElement("tr"),I={tr:L.createElement("tbody"),tbody:q,thead:q,tfoot:q,td:H,th:H,"*":L.createElement("div")},V=/complete|loaded|interactive/,X=/^[\w-]*$/,B={},U=B.toString,J={},W=L.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},G=Array.isArray||function(t){return t instanceof Array};return J.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=W).appendChild(t),i=~J.qsa(r,e).indexOf(t),o&&W.removeChild(t),i},S=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},N=function(n){return A.call(n,function(t,e){return n.indexOf(t)==e})},J.fragment=function(t,e,n){var i,r,o;return D.test(t)&&(i=T(L.createElement(RegExp.$1))),i||(t.replace&&(t=t.replace(k,"<$1></$2>")),e===E&&(e=_.test(t)&&RegExp.$1),e in I||(e="*"),(o=I[e]).innerHTML=""+t,i=T.each(O.call(o.childNodes),function(){o.removeChild(this)})),c(n)&&(r=T(i),T.each(n,function(t,e){-1<R.indexOf(t)?r[t](e):r.attr(t,e)})),i},J.Z=function(t,e){return(t=t||[]).__proto__=T.fn,t.selector=e||"",t},J.isZ=function(t){return t instanceof J.Z},J.init=function(t,e){var n;if(!t)return J.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&_.test(t))n=J.fragment(t,RegExp.$1,e),t=null;else{if(e!==E)return T(e).find(t);n=J.qsa(L,t)}else{if(a(t))return T(L).ready(t);if(J.isZ(t))return t;if(G(t))n=r(t);else if(i(t))n=[t],t=null;else if(_.test(t))n=J.fragment(t.trim(),RegExp.$1,e),t=null;else{if(e!==E)return T(e).find(t);n=J.qsa(L,t)}}return J.Z(n,t)},(T=function(t,e){return J.init(t,e)}).extend=function(e){var n,t=O.call(arguments,1);return"boolean"==typeof e&&(n=e,e=t.shift()),t.forEach(function(t){m(e,t,n)}),e},J.qsa=function(t,e){var n,i="#"==e[0],r=!i&&"."==e[0],o=i||r?e.slice(1):e,a=X.test(o);return s(t)&&a&&i?(n=t.getElementById(o))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:O.call(a&&!i?r?t.getElementsByClassName(o):t.getElementsByTagName(e):t.querySelectorAll(e))},T.contains=L.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},T.type=u,T.isFunction=a,T.isWindow=o,T.isArray=G,T.isPlainObject=c,T.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},T.inArray=function(t,e,n){return P.indexOf.call(e,t,n)},T.camelCase=S,T.trim=function(t){return null==t?"":String.prototype.trim.call(t)},T.uuid=0,T.support={},T.expr={},T.map=function(t,e){var n,i,r,o=[];if(l(t))for(i=0;i<t.length;i++)null!=(n=e(t[i],i))&&o.push(n);else for(r in t)null!=(n=e(t[r],r))&&o.push(n);return f(o)},T.each=function(t,e){var n,i;if(l(t)){for(n=0;n<t.length;n++)if(!1===e.call(t[n],n,t[n]))return t}else for(i in t)if(!1===e.call(t[i],i,t[i]))return t;return t},T.grep=function(t,e){return A.call(t,e)},window.JSON&&(T.parseJSON=JSON.parse),T.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){B["[object "+e+"]"]=e.toLowerCase()}),T.fn={forEach:P.forEach,reduce:P.reduce,push:P.push,sort:P.sort,indexOf:P.indexOf,concat:P.concat,map:function(n){return T(T.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return T(O.apply(this,arguments))},ready:function(t){return V.test(L.readyState)&&L.body?t(T):L.addEventListener("DOMContentLoaded",function(){t(T)},!1),this},get:function(t){return t===E?O.call(this):this[0<=t?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(n){return P.every.call(this,function(t,e){return!1!==n.call(t,e,t)}),this},filter:function(e){return a(e)?this.not(this.not(e)):T(A.call(this,function(t){return J.matches(t,e)}))},add:function(t,e){return T(N(this.concat(T(t,e))))},is:function(t){return 0<this.length&&J.matches(this[0],t)},not:function(e){var n=[];if(a(e)&&e.call!==E)this.each(function(t){e.call(this,t)||n.push(this)});else{var i="string"==typeof e?this.filter(e):l(e)&&a(e.item)?O.call(e):T(e);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return T(n)},has:function(t){return this.filter(function(){return i(t)?T.contains(this,t):T(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!i(t)?t:T(t)},last:function(){var t=this[this.length-1];return t&&!i(t)?t:T(t)},find:function(t){var n=this;return t?"object"==typeof t?T(t).filter(function(){var e=this;return P.some.call(n,function(t){return T.contains(t,e)})}):1==this.length?T(J.qsa(this[0],t)):this.map(function(){return J.qsa(this,t)}):[]},closest:function(t,e){var n=this[0],i=!1;for("object"==typeof t&&(i=T(t));n&&!(i?0<=i.indexOf(n):J.matches(n,t));)n=n!==e&&!s(n)&&n.parentNode;return T(n)},parents:function(t){for(var e=[],n=this;0<n.length;)n=T.map(n,function(t){if((t=t.parentNode)&&!s(t)&&e.indexOf(t)<0)return e.push(t),t});return v(e,t)},parent:function(t){return v(N(this.pluck("parentNode")),t)},children:function(t){return v(this.map(function(){return d(this)}),t)},contents:function(){return this.map(function(){return O.call(this.childNodes)})},siblings:function(t){return v(this.map(function(t,e){return A.call(d(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return T.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=t(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(e){var n=a(e);if(this[0]&&!n)var i=T(e).get(0),r=i.parentNode||1<this.length;return this.each(function(t){T(this).wrapAll(n?e.call(this,t):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){var e;for(T(this[0]).before(t=T(t));(e=t.children()).length;)t=e.first();T(t).append(this)}return this},wrapInner:function(r){var o=a(r);return this.each(function(t){var e=T(this),n=e.contents(),i=o?r.call(this,t):r;n.length?n.wrapAll(i):e.append(i)})},unwrap:function(){return this.parent().each(function(){T(this).replaceWith(T(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=T(this);(e===E?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(t){return T(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return T(this.pluck("nextElementSibling")).filter(t||"*")},html:function(n){return 0 in arguments?this.each(function(t){var e=this.innerHTML;T(this).empty().append(g(this,n,t,e))}):0 in this?this[0].innerHTML:null},text:function(n){return 0 in arguments?this.each(function(t){var e=g(this,n,t,this.textContent);this.textContent=null==e?"":""+e}):0 in this?this[0].textContent:null},attr:function(e,n){var t;return"string"!=typeof e||1 in arguments?this.each(function(t){if(1===this.nodeType)if(i(e))for(j in e)y(this,j,e[j]);else y(this,e,g(this,n,t,this.getAttribute(e)))}):this.length&&1===this[0].nodeType?!(t=this[0].getAttribute(e))&&e in this[0]?this[0][e]:t:E},removeAttr:function(t){return this.each(function(){1===this.nodeType&&y(this,t)})},prop:function(e,n){return e=Y[e]||e,1 in arguments?this.each(function(t){this[e]=g(this,n,t,this[e])}):this[0]&&this[0][e]},data:function(t,e){var n="data-"+t.replace(M,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,e):this.attr(n);return null!==i?b(i):E},val:function(e){return 0 in arguments?this.each(function(t){this.value=g(this,e,t,this.value)}):this[0]&&(this[0].multiple?T(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(o){if(o)return this.each(function(t){var e=T(this),n=g(this,o,t,e.offset()),i=e.offsetParent().offset(),r={top:n.top-i.top,left:n.left-i.left};"static"==e.css("position")&&(r.position="relative"),e.css(r)});if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,e){if(arguments.length<2){var n=this[0],i=getComputedStyle(n,"");if(!n)return;if("string"==typeof t)return n.style[S(t)]||i.getPropertyValue(t);if(G(t)){var r={};return T.each(G(t)?t:[t],function(t,e){r[e]=n.style[S(e)]||i.getPropertyValue(e)}),r}}var o="";if("string"==u(t))e||0===e?o=h(t)+":"+p(t,e):this.each(function(){this.style.removeProperty(h(t))});else for(j in t)t[j]||0===t[j]?o+=h(j)+":"+p(j,t[j])+";":this.each(function(){this.style.removeProperty(h(j))});return this.each(function(){this.style.cssText+=";"+o})},index:function(t){return t?this.indexOf(T(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&P.some.call(this,function(t){return this.test(x(t))},n(t))},addClass:function(n){return n?this.each(function(t){C=[];var e=x(this);g(this,n,t,e).split(/\s+/g).forEach(function(t){T(this).hasClass(t)||C.push(t)},this),C.length&&x(this,e+(e?" ":"")+C.join(" "))}):this},removeClass:function(e){return this.each(function(t){if(e===E)return x(this,"");C=x(this),g(this,e,t,C).split(/\s+/g).forEach(function(t){C=C.replace(n(t)," ")}),x(this,C.trim())})},toggleClass:function(n,i){return n?this.each(function(t){var e=T(this);g(this,n,t,x(this)).split(/\s+/g).forEach(function(t){(i===E?!e.hasClass(t):i)?e.addClass(t):e.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===E?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===E?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=z.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(T(t).css("margin-top"))||0,n.left-=parseFloat(T(t).css("margin-left"))||0,i.top+=parseFloat(T(e[0]).css("border-top-width"))||0,i.left+=parseFloat(T(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||L.body;t&&!z.test(t.nodeName)&&"static"==T(t).css("position");)t=t.offsetParent;return t})}},T.fn.detach=T.fn.remove,["width","height"].forEach(function(i){var r=i.replace(/./,function(t){return t[0].toUpperCase()});T.fn[i]=function(e){var t,n=this[0];return e===E?o(n)?n["inner"+r]:s(n)?n.documentElement["scroll"+r]:(t=this.offset())&&t[i]:this.each(function(t){(n=T(this)).css(i,g(this,e,t,n[i]()))})}}),F.forEach(function(e,a){var s=a%2;T.fn[e]=function(){var e,i,r=T.map(arguments,function(t){return"object"==(e=u(t))||"array"==e||null==t?t:J.fragment(t)}),o=1<this.length;return r.length<1?this:this.each(function(t,e){i=s?e:e.parentNode,e=0==a?e.nextSibling:1==a?e.firstChild:2==a?e:null;var n=T.contains(L.documentElement,i);r.forEach(function(t){if(o)t=t.cloneNode(!0);else if(!i)return T(t).remove();i.insertBefore(t,e),n&&w(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},T.fn[s?e+"To":"insert"+(a?"Before":"After")]=function(t){return T(t)[e](this),this}}),J.Z.prototype=T.fn,J.uniq=N,J.deserializeValue=b,T.zepto=J,T}();window.Zepto=Zepto,window.$===undefined&&(window.$=Zepto),function(l){function f(t){return t._zid||(t._zid=e++)}function a(t,e,n,i){if((e=h(e)).ns)var r=o(e.ns);return(E[f(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||r.test(t.ns))&&(!n||f(t.fn)===f(n))&&(!i||t.sel==i)})}function h(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function o(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function p(t,e){return t.del&&!n&&t.e in i||!!e}function d(t){return j[t]||n&&i[t]||t}function c(r,t,e,o,a,s,u){var n=f(r),c=E[n]||(E[n]=[]);t.split(/\s/).forEach(function(t){if("ready"==t)return l(document).ready(e);var n=h(t);n.fn=e,n.sel=a,n.e in j&&(e=function(t){var e=t.relatedTarget;if(!e||e!==this&&!l.contains(this,e))return n.fn.apply(this,arguments)});var i=(n.del=s)||e;n.proxy=function(t){if(!(t=v(t)).isImmediatePropagationStopped()){t.data=o;var e=i.apply(r,t._args==y?[t]:[t].concat(t._args));return!1===e&&(t.preventDefault(),t.stopPropagation()),e}},n.i=c.length,c.push(n),"addEventListener"in r&&r.addEventListener(d(n.e),n.proxy,p(n,u))})}function m(e,t,n,i,r){var o=f(e);(t||"").split(/\s/).forEach(function(t){a(e,t,n,i).forEach(function(t){delete E[o][t.i],"removeEventListener"in e&&e.removeEventListener(d(t.e),t.proxy,p(t,r))})})}function v(i,r){return!r&&i.isDefaultPrevented||(r||(r=i),l.each(t,function(t,e){var n=r[t];i[t]=function(){return this[e]=u,n&&n.apply(r,arguments)},i[e]=T}),(r.defaultPrevented!==y?r.defaultPrevented:"returnValue"in r?!1===r.returnValue:r.getPreventDefault&&r.getPreventDefault())&&(i.isDefaultPrevented=u)),i}function g(t){var e,n={originalEvent:t};for(e in t)r.test(e)||t[e]===y||(n[e]=t[e]);return v(n,t)}var y,e=1,x=Array.prototype.slice,b=l.isFunction,w=function(t){return"string"==typeof t},E={},s={},n="onfocusin"in window,i={focus:"focusin",blur:"focusout"},j={mouseenter:"mouseover",mouseleave:"mouseout"};s.click=s.mousedown=s.mouseup=s.mousemove="MouseEvents",l.event={add:c,remove:m},l.proxy=function(t,e){var n=2 in arguments&&x.call(arguments,2);if(b(t)){var i=function(){return t.apply(e,n?n.concat(x.call(arguments)):arguments)};return i._zid=f(t),i}if(w(e))return n?(n.unshift(t[e],t),l.proxy.apply(null,n)):l.proxy(t[e],t);throw new TypeError("expected function")},l.fn.bind=function(t,e,n){return this.on(t,e,n)},l.fn.unbind=function(t,e){return this.off(t,e)},l.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var u=function(){return!0},T=function(){return!1},r=/^([A-Z]|returnValue$|layer[XY]$)/,t={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};l.fn.delegate=function(t,e,n){return this.on(e,t,n)},l.fn.undelegate=function(t,e,n){return this.off(e,t,n)},l.fn.live=function(t,e){return l(document.body).delegate(this.selector,t,e),this},l.fn.die=function(t,e){return l(document.body).undelegate(this.selector,t,e),this},l.fn.on=function(e,r,n,o,a){var s,u,i=this;return e&&!w(e)?(l.each(e,function(t,e){i.on(t,r,n,e,a)}),i):(w(r)||b(o)||!1===o||(o=n,n=r,r=y),(b(n)||!1===n)&&(o=n,n=y),!1===o&&(o=T),i.each(function(t,i){a&&(s=function(t){return m(i,t.type,o),o.apply(this,arguments)}),r&&(u=function(t){var e,n=l(t.target).closest(r,i).get(0);if(n&&n!==i)return e=l.extend(g(t),{currentTarget:n,liveFired:i}),(s||o).apply(n,[e].concat(x.call(arguments,1)))}),c(i,e,o,n,r,u||s)}))},l.fn.off=function(t,n,e){var i=this;return t&&!w(t)?(l.each(t,function(t,e){i.off(t,n,e)}),i):(w(n)||b(e)||!1===e||(e=n,n=y),!1===e&&(e=T),i.each(function(){m(this,t,e,n)}))},l.fn.trigger=function(t,e){return(t=w(t)||l.isPlainObject(t)?l.Event(t):v(t))._args=e,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):l(this).triggerHandler(t,e)})},l.fn.triggerHandler=function(n,i){var r,o;return this.each(function(t,e){(r=g(w(n)?l.Event(n):n))._args=i,r.target=e,l.each(a(e,n.type||n),function(t,e){if(o=e.proxy(r),r.isImmediatePropagationStopped())return!1})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){l.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){l.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),l.Event=function(t,e){w(t)||(t=(e=t).type);var n=document.createEvent(s[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),v(n)}}(Zepto),function(p){function r(t,e,n){var i=p.Event(e);return p(t).trigger(i,n),!i.isDefaultPrevented()}function a(t,e,n,i){if(t.global)return r(e||f,n,i)}function d(t){t.global&&0==p.active++&&a(t,null,"ajaxStart")}function o(t){t.global&&!--p.active&&a(t,null,"ajaxStop")}function m(t,e){var n=e.context;if(!1===e.beforeSend.call(n,t,e)||!1===a(e,n,"ajaxBeforeSend",[t,e]))return!1;a(e,n,"ajaxSend",[t,e])}function v(t,e,n,i){var r=n.context,o="success";n.success.call(r,t,o,e),i&&i.resolveWith(r,[t,o,e]),a(n,r,"ajaxSuccess",[e,n,t]),s(o,e,n)}function g(t,e,n,i,r){var o=i.context;i.error.call(o,n,e,t),r&&r.rejectWith(o,[n,e,t]),a(i,o,"ajaxError",[n,i,t||e]),s(e,n,i)}function s(t,e,n){var i=n.context;n.complete.call(i,e,t),a(n,i,"ajaxComplete",[e,n]),o(n)}function y(){}function x(t){return t&&(t=t.split(";",2)[0]),t&&(t==T?"html":t==i?"json":e.test(t)?"script":n.test(t)&&"xml")||"text"}function b(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function w(t){t.processData&&t.data&&"string"!=p.type(t.data)&&(t.data=p.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=b(t.url,t.data),t.data=undefined)}function u(t,e,n,i){return p.isFunction(e)&&(i=n,n=e,e=undefined),p.isFunction(n)||(i=n,n=undefined),{url:t,data:e,success:n,dataType:i}}function c(n,t,i,r){var o,a=p.isArray(t),s=p.isPlainObject(t);p.each(t,function(t,e){o=p.type(e),r&&(t=i?r:r+"["+(s||"object"==o||"array"==o?t:"")+"]"),!r&&a?n.add(e.name,e.value):"array"==o||!i&&"object"==o?c(n,e,i,t):n.add(t,e)})}var E,j,l=0,f=window.document,h=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,e=/^(?:text|application)\/javascript/i,n=/^(?:text|application)\/xml/i,i="application/json",T="text/html",C=/^\s*$/;p.active=0,p.ajaxJSONP=function(n,i){if(!("type"in n))return p.ajax(n);var r,o,t=n.jsonpCallback,a=(p.isFunction(t)?t():t)||"jsonp"+ ++l,s=f.createElement("script"),u=window[a],e=function(t){p(s).triggerHandler("error",t||"abort")},c={abort:e};return i&&i.promise(c),p(s).on("load error",function(t,e){clearTimeout(o),p(s).off().remove(),"error"!=t.type&&r?v(r[0],c,n,i):g(null,e||"error",c,n,i),window[a]=u,r&&p.isFunction(u)&&u(r[0]),u=r=undefined}),!1===m(c,n)?e("abort"):(window[a]=function(){r=arguments},s.src=n.url.replace(/\?(.+)=\?/,"?$1="+a),f.head.appendChild(s),0<n.timeout&&(o=setTimeout(function(){e("timeout")},n.timeout))),c},p.ajaxSettings={type:"GET",beforeSend:y,success:y,error:y,complete:y,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:i,xml:"application/xml, text/xml",html:T,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},p.ajax=function(t){var i=p.extend({},t||{}),r=p.Deferred&&p.Deferred();for(E in p.ajaxSettings)i[E]===undefined&&(i[E]=p.ajaxSettings[E]);d(i),i.crossDomain||(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host),i.url||(i.url=window.location.toString()),w(i);var o=i.dataType,e=/\?.+=\?/.test(i.url);if(e&&(o="jsonp"),!1!==i.cache&&(t&&!0===t.cache||"script"!=o&&"jsonp"!=o)||(i.url=b(i.url,"_="+Date.now())),"jsonp"==o)return e||(i.url=b(i.url,i.jsonp?i.jsonp+"=?":!1===i.jsonp?"":"callback=?")),p.ajaxJSONP(i,r);var a,n=i.accepts[o],s={},u=function(t,e){s[t.toLowerCase()]=[t,e]},c=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,l=i.xhr(),f=l.setRequestHeader;if(r&&r.promise(l),i.crossDomain||u("X-Requested-With","XMLHttpRequest"),u("Accept",n||"*/*"),(n=i.mimeType||n)&&(-1<n.indexOf(",")&&(n=n.split(",",2)[0]),l.overrideMimeType&&l.overrideMimeType(n)),(i.contentType||!1!==i.contentType&&i.data&&"GET"!=i.type.toUpperCase())&&u("Content-Type",i.contentType||"application/x-www-form-urlencoded"),i.headers)for(j in i.headers)u(j,i.headers[j]);if(l.setRequestHeader=u,!(l.onreadystatechange=function(){if(4==l.readyState){l.onreadystatechange=y,clearTimeout(a);var t,e=!1;if(200<=l.status&&l.status<300||304==l.status||0==l.status&&"file:"==c){o=o||x(i.mimeType||l.getResponseHeader("content-type")),t=l.responseText;try{"script"==o?(0,eval)(t):"xml"==o?t=l.responseXML:"json"==o&&(t=C.test(t)?null:p.parseJSON(t))}catch(n){e=n}e?g(e,"parsererror",l,i,r):v(t,l,i,r)}else g(l.statusText||null,l.status?"error":"abort",l,i,r)}})===m(l,i))return l.abort(),g(null,"abort",l,i,r),l;if(i.xhrFields)for(j in i.xhrFields)l[j]=i.xhrFields[j];var h=!("async"in i)||i.async;for(j in l.open(i.type,i.url,h,i.username,i.password),s)f.apply(l,s[j]);return 0<i.timeout&&(a=setTimeout(function(){l.onreadystatechange=y,l.abort(),g(null,"timeout",l,i,r)},i.timeout)),l.send(i.data?i.data:null),l},p.get=function(){return p.ajax(u.apply(null,arguments))},p.post=function(){var t=u.apply(null,arguments);return t.type="POST",p.ajax(t)},p.getJSON=function(){var t=u.apply(null,arguments);return t.dataType="json",p.ajax(t)},p.fn.load=function(t,e,n){if(!this.length)return this;var i,r=this,o=t.split(/\s/),a=u(t,e,n),s=a.success;return 1<o.length&&(a.url=o[0],i=o[1]),a.success=function(t){r.html(i?p("<div>").html(t.replace(h,"")).find(i):t),s&&s.apply(r,arguments)},p.ajax(a),this};var S=encodeURIComponent;p.param=function(t,e){var n=[];return n.add=function(t,e){this.push(S(t)+"="+S(e))},c(n,t,e),n.join("&").replace(/%20/g,"+")}}(Zepto),function(i){i.fn.serializeArray=function(){var e,n=[];return i([].slice.call(this.get(0).elements)).each(function(){var t=(e=i(this)).attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=t&&"reset"!=t&&"button"!=t&&("radio"!=t&&"checkbox"!=t||this.checked)&&n.push({name:e.attr("name"),value:e.val()})}),n},i.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},i.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var e=i.Event("submit");this.eq(0).trigger(e),e.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(n){"__proto__"in{}||n.extend(n.zepto,{Z:function(t,e){return t=t||[],n.extend(t,n.fn),t.selector=e||"",t.__Z=!0,t},isZ:function(t){return"array"===n.type(t)&&"__Z"in t}});try{getComputedStyle(undefined)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t){try{return e(t)}catch(Ij){return null}}}}(Zepto),function(p,d){function m(t){return t.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function t(t){return n?n+t:t.toLowerCase()}var n,v,g,y,x,b,w,E,j,T,i="",e={Webkit:"webkit",Moz:"",O:"o"},r=document.createElement("div"),C=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,S={};p.each(e,function(t,e){if(r.style[t+"TransitionProperty"]!==d)return i="-"+t.toLowerCase()+"-",n=e,!1}),v=i+"transform",S[g=i+"transition-property"]=S[y=i+"transition-duration"]=S[b=i+"transition-delay"]=S[x=i+"transition-timing-function"]=S[w=i+"animation-name"]=S[E=i+"animation-duration"]=S[T=i+"animation-delay"]=S[j=i+"animation-timing-function"]="",p.fx={off:n===d&&r.style.transitionProperty===d,speeds:{_default:400,fast:200,slow:600},cssPrefix:i,transitionEnd:t("TransitionEnd"),animationEnd:t("AnimationEnd")},p.fn.animate=function(t,e,n,i,r){return p.isFunction(e)&&(i=e,e=n=d),p.isFunction(n)&&(i=n,n=d),p.isPlainObject(e)&&(n=e.easing,i=e.complete,r=e.delay,e=e.duration),e&&(e=("number"==typeof e?e:p.fx.speeds[e]||p.fx.speeds._default)/1e3),r&&(r=parseFloat(r)/1e3),this.anim(t,e,n,i,r)},p.fn.anim=function(t,e,n,i,r){var o,a,s,u={},c="",l=this,f=p.fx.transitionEnd,h=!1;if(e===d&&(e=p.fx.speeds._default/1e3),r===d&&(r=0),p.fx.off&&(e=0),"string"==typeof t)u[w]=t,u[E]=e+"s",u[T]=r+"s",u[j]=n||"linear",f=p.fx.animationEnd;else{for(o in a=[],t)C.test(o)?c+=o+"("+t[o]+") ":(u[o]=t[o],a.push(m(o)));c&&(u[v]=c,a.push(v)),0<e&&"object"==typeof t&&(u[g]=a.join(", "),u[y]=e+"s",u[b]=r+"s",u[x]=n||"linear")}return s=function(t){if(void 0!==t){if(t.target!==t.currentTarget)return;p(t.target).unbind(f,s)}else p(this).unbind(f,s);h=!0,p(this).css(S),i&&i.call(this)},0<e&&(this.bind(f,s),setTimeout(function(){h||s.call(l)},1e3*(e+r)+25)),this.size()&&this.get(0).clientLeft,this.css(u),e<=0&&setTimeout(function(){l.each(function(){s.call(this)})},0),this},r=null}(Zepto),function(){}.call(this);
!function(e){e.fn.end=function(){return this.prevObject||e()},e.fn.andSelf=function(){return this.add(this.prevObject||e())},"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings,contents".split(",").forEach(function(n){var t=e.fn[n];e.fn[n]=function(){var n=t.apply(this,arguments);return n.prevObject=this,n}})}(Zepto);
!function(r){var e=function(t,o){return function(n){var r,e;return this?(r=(e=this)[t](),{width:["left","right"],height:["top","bottom"]}[t].forEach(function(t){r+=parseInt(e.css("padding-"+t),10),o&&(r+=parseInt(e.css("border-"+t+"-width"),10)),n&&(r+=parseInt(e.css("margin-"+t),10))}),r):null}};["width","height"].forEach(function(t){var n=t.substr(0,1).toUpperCase()+t.substr(1);r.fn["inner"+n]=e(t,!1),r.fn["outer"+n]=e(t,!0)}),r.prototype=r.fn}(Zepto),jQuery=Zepto;
(function(){var e;(null!=(e="undefined"!=typeof window&&null!==window?window:global).spongecell?e.spongecell:e.spongecell={}).Browser=function(){function e(){}var d,t;return d=/Android ([2].?[3-9].?[0-9]?|[4-8].?[0-9].?[0-9]?)/i,e.detect=function(n){var e,t,i,o,r,s,a,l,u;return null==n&&(n=navigator.userAgent),r=null!=(s=n.match(/(ipod|iphone|ipad)/i))&&null!=(a=s[1])?a.toLowerCase():void 0,e=/android/i.test(n),u=(o=function(e){var t;return t=n.match(e),parseFloat(null!=t?t[1]:void 0)||""})(/version\/(\d+(\.\d+)?)/i),t=/chrome.+? edge/i.test(n)?{msedge:!0,version:o(/edge\/(\d+(\.\d+)?)/i)}:/chrome|crmo|spotify|crios/i.test(n)?{chrome:!0,version:o(/(?:chrome|crmo|spotify)\/(\d+(\.\d+)?)/i)}:/firefox/i.test(n)?{firefox:!0,version:o(/(?:firefox)[ \/](\d+(\.\d+)?)/i)}:/msie|trident/i.test(n)?(i={msie:!0,version:l=o(/(?:msie |rv:)(\d+(\.\d+)?)/i)},l<10&&(i.unsupported=!0),i):/phantom/i.test(n)?{phantom:!0}:/safari/i.test(n)&&!/android/i.test(n)?{safari:!0,version:u,unsupported:u<5.2}:void 0,r?(null==t&&(t={}),t.ios=!0,t.iosVersion=u,delete t.unsupported,t.mobile=!0):e&&(null==t&&(t={}),t.android=!0,t.androidVersion=o(/android (\d+(\.\d+)?)/i),t.mobile=!0,d.test(n)||(t.unsupported=!0)),null==t&&(t={unsupported:!0}),t},t=e.detect(),e.supported=function(){return!t.unsupported},e.isAndroidSupported=function(){return t.android&&d.test(navigator.userAgent)},e.isAndroidGingerbread=function(){return t.android&&2.3<=t.androidVersion&&t.androidVersion<3},e.isAndroidIceCreamSandwich=function(){return t.android&&4<=t.androidVersion&&t.androidVersion<4.1},e.isAndroidJellyBean=function(){return t.android&&4.1<=t.androidVersion&&t.androidVersion<4.4},e.isAndroidLollipop=function(){return t.android&&5<=t.androidVersion&&t.androidVersion<6},e.isAndroid=function(){return t.android},e.isiOS=function(){return t.ios},e.isIE8=function(){return t.msie&&8==+t.version},e.isIE9=function(){return t.msie&&9==+t.version},e.isIE10=function(){return t.msie&&10==+t.version},e.isIE11=function(){return t.msie&&11==+t.version},e.isIE9Below=function(){return t.msie&&+t.version<=9},e.isIE10Below=function(){return t.msie&&+t.version<=10},e.isIE=function(){return t.msie},e.isiOS5=function(){return t.ios&&5==+t.iosVersion},e.isMobile=function(){return t.android||t.ios||/tablet|[^-]mobi/i.test(navigator.userAgent)},e.isChrome=function(){return t.chrome},e.isFirefox=function(){return t.firefox},e.isSafari=function(){return t.safari},e.isPhantom=function(){return t.phantom},e.isWindowsSafari=function(){return/Windows.*AppleWebKit.*Safari/.test(navigator.userAgent)&&!/Chrome|Spotify/.test(navigator.userAgent)},e.supportsFullscreen=function(){return!this.isIE()&&!this.isWindowsSafari()},e.supportsSrcdoc=function(){return!this.isSafari()&&!this.isChrome()},e.supportsLinkOnload=function(){return!(t.android&&!t.chrome||t.safari&&t.version<6)},e.detectsSrcdoc=function(){return"about:srcdoc"===window.location.href},e}()}).call(this),function(){var e;(null!=(e="undefined"!=typeof window&&null!==window?window:global).spongecell?e.spongecell:e.spongecell={}).Cookie=function(){function e(){}return e.createCookie=function(e,t,n){var i,o;return null==n&&(n=24),navigator.cookieEnabled?((i=new Date).setTime(i.getTime()+60*parseInt(n)*60*1e3),o="; expires="+i.toGMTString(),document.cookie=e+"="+t+o+"; path=/"):null},e.readCookie=function(e){var t,n,i,o,r;if(!navigator.cookieEnabled)return null;for(r=e+"=",i=0,o=(n=document.cookie.split(";")).length;i<o;i++)if(" "===(t=n[i])[0]&&(t=t.substring(1,t.length)),0===t.indexOf(r))return t.substring(r.length,t.length);return null},e}()}.call(this),function(){var e,s,a=[].slice;e="undefined"!=typeof window&&null!==window?window:global,(s=null!=e.spongecell?e.spongecell:e.spongecell={}).Console=function(){function e(){}return e.ENABLED=function(){var e;try{return!!(null!=(e=s.Cookie)?e.readCookie("_console_logging"):void 0)}catch(t){return t,!1}}(),e.log=function(e){var t,n,i;if(n=e,t=2<=arguments.length?a.call(arguments,1):[],this.ENABLED&&window.console)return null!=window.console.log.apply?(i=window.console).log.apply(i,[n].concat(a.call(t))):window.console.log(n)},e.debug=function(e){var t,n,i,o,r;if(n=e,t=2<=arguments.length?a.call(arguments,1):[],this.ENABLED&&window.console)return null!=(null!=(i=window.console.debug)?i.apply:void 0)?(o=window.console).debug.apply(o,[n].concat(a.call(t))):(r=s.Console).log.apply(r,[n].concat(a.call(t)))},e.pad=function(e,t){var n;for(n=e||"";n.length<t;)n+=" ";return n},e.groupCollapsedSupported=function(){var e,t;try{return null!=(null!=(e=window.console)&&null!=(t=e.groupCollapsed)?t.apply:void 0)}catch(n){return n,!1}},e.group=function(e){var t,n,i,o;if(n=e,t=2<=arguments.length?a.call(arguments,1):[],this.ENABLED)return this.groupCollapsedSupported()?(i=window.console).groupCollapsed.apply(i,[n].concat(a.call(t))):(o=s.Console).log.apply(o,[n].concat(a.call(t)))},e.groupEnd=function(){var e;if(this.ENABLED&&(null!=(e=window.console)?e.groupEnd:void 0))return window.console.groupEnd()},e}()}.call(this),function(e){function i(){}function o(e,t){return function(){e.apply(t,arguments)}}function r(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function s(n,i){for(;3===n._state;)n=n._value;return 0===n._state?void n._deferreds.push(i):(n._handled=!0,void r._immediateFn(function(){var e=1===n._state?i.onFulfilled:i.onRejected;if(null!==e){var t;try{t=e(n._value)}catch(s){return void l(i.promise,s)}a(i.promise,t)}else(1===n._state?a:l)(i.promise,n._value)}))}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof r)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void c(o(n,t),e)}e._state=1,e._value=t,u(e)}catch(a){l(e,a)}}function l(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function c(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,l(t,e))})}catch(r){if(n)return;n=!0,l(t,r)}}var t=setTimeout;r.prototype["catch"]=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=new this.constructor(i);return s(this,new d(e,t,n)),n},r.all=function(e){var a=Array.prototype.slice.call(e);return new r(function(i,o){function r(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){r(t,e)},o)}a[t]=e,0==--s&&i(a)}catch(d){o(d)}}if(0===a.length)return i([]);for(var s=a.length,e=0;e<a.length;e++)r(e,a[e])})},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(n){return new r(function(e,t){t(n)})},r.race=function(o){return new r(function(e,t){for(var n=0,i=o.length;n<i;n++)o[n].then(e,t)})},r._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){t(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r._setImmediateFn=function(e){r._immediateFn=e},r._setUnhandledRejectionFn=function(e){r._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=r:e.Promise||(e.Promise=r)}(this),function(){"use strict";var a,l,s=[].slice;l=null!=window.spongecell?window.spongecell:window.spongecell={},a=null!=l.requestMap?l.requestMap:l.requestMap={},l.Net=function(){function e(){}return e.isSSL=function(){return!(location.host&&(0<=location.host.indexOf("localhost")||0<=location.host.indexOf("127.0.0.1"))||"about:"===location.protocol&&window.parent&&"https:"!==window.parent.location.protocol)},e.isHttp=function(e){return!!/^https?\:\/\//i.test(e)},e.isHttpEncoded=function(e){return/^https?\%3a\%2f\%2f/i.test(e)},e.encode=function(e){return e?encodeURIComponent(e):null},e.writeRequest=function(n){var i;return i=this,new Promise(function(e,t){return l.Browser.isIE9Below()?i.writeScript(n,e,t):i.ajax(n,e,t)})},e.writeScript=function(e,t,n,i,o){var r,s;if(null==o&&(o=null),o=null!=o?o:document,this.isSSL()&&(e=e.replace(/^http:\/\//,"https://")),null!=t){if(e+=0<e.indexOf("?")?"&":"?",a[e])return this.nestCallbackFn(a[e],t);e+="callback="+(a[e]=l.Broker.registerCallbackFn(t))}return(s=o.createElement("script")).defer=s.async=!0,s.src=e,null!=n&&(s.onload=n),s.onerror=null!=i?i:null!=n?n:void 0,(null!=(r=l.Browser)?r.isIE8():void 0)&&(s.onreadystatechange=function(){if("loaded"===this.readyState)return n()}),o.getElementsByTagName("head")[0].appendChild(s)},e.ajax=function(e,i,o,t,n,r){var s,a,l,u;if(null==t&&(t=!1),null==n&&(n={}),null==r&&(r="function"==typeof(s="undefined"!=typeof XMLHttpRequest&&null!==XMLHttpRequest?XMLHttpRequest:ActiveXObject)?new s("MSXML2.XMLHTTP.3.0"):void 0),!r)return this.writeScript.apply(this,arguments);if(l=setTimeout(function(){return r.abort(),o({error:"AJAX request timed out"})},2e3),r.withCredentials=!0,r.onreadystatechange=function(){var e,t;if(!(r.readyState<4)){clearTimeout(l);try{e=JSON.parse(r.responseText)}catch(n){return o({error:n})}switch(t=r.status){case 200:return i(e,r);default:return o({error:"AJAX request responded with a "+t})}}},r.open("GET",e,!0),r.setRequestHeader){for(a in n)u=n[a],r.setRequestHeader(a,u);t&&r.setRequestHeader("X-Requested-With","XMLHttpRequest")}return r.send(""),r},e.getParam=function(e,t,n){var i;return null==n&&(n="&"),null!=(i=this.getParams(t,n)[e])?i:""},e.getParams=function(e,t){var n,i,o,r,s;for(r={},n=0,o=(s=e.split(t)).length;n<o;n++)2===(i=s[n].split("=")).length&&(r[i[0]]=i[1]);return r},e.appendQueryParamsToUrl=function(e){var t,n,i,o,r;for(r=e,t=0,n=(o=2<=arguments.length?s.call(arguments,1):[]).length;t<n;t++)0!==(null!=(i=o[t])?i.length:void 0)&&(i=i.replace(/^[?&]*(.*?)&?$/,"$1"),r+=(-1<r.indexOf("?")?"&":"?")+i);return r},e.nestCallbackFn=function(e,i){var t,o;return t=e.split(".").pop(),o=l.callbacks[t],l.callbacks[t]=function(){var e,t,n;for(t in e=[],arguments)n=arguments[t],e[t]="object"==typeof n?l.Utils.extend({},n):n;o.apply(null,arguments),i.apply(null,e)}},e.scrubTargeting=function(e,t){var n;return"ysa"===e&&(n=decodeURIComponent(t).match(/yud=(.*)/))?n[1]:t},e}()}.call(this),function(){"use strict";var e,u,a=[].slice;e="undefined"!=typeof window&&null!==window?window:global,(u=null!=e.spongecell?e.spongecell:e.spongecell={}).Utils=function(){function e(){}var t;return t=new RegExp('^(http|https)://[^ "]+$'),e.intervals={},e.extend=function(e){var t,n,i,o,r,s;if(1<arguments.length)for(i=0,o=(t=Array.prototype.slice.call(arguments,1,arguments.length)).length;i<o;i++)if("object"==typeof(r=t[i]))for(n in r)s=r[n],e[n]=s;return e},e.generateIID=function(){return"xxxx-xxxx-Axxx-xxxx".replace(/x/g,function(){return new Number(36*Math.random()|0).toString(36)})},e.generateElementIID=function(){return"xxxxxxxx".replace(/x/g,function(){return new Number(36*Math.random()|0).toString(36)})},e.getUrl=function(e){return u.Utils.isString(e)?e:u.Utils.isObject(e)?u.Net.isSSL()?null!=e?e.ssl:void 0:null!=e?e.no_ssl:void 0:void 0},e.convertUrls=function(e,t){var n,i,o,r,s,a,l;if(t){for(r=[],i=0,o=t.length;i<o;i++)null!=(a=e[n=t[i]])?r.push(e[n]=u.Utils.getUrl(a)):r.push(void 0);return r}for(n in s=[],e)null!=(l=e[n])?s.push(e[n]=u.Utils.getUrl(l)):s.push(void 0);return s},e.toQueryString=function(e){var t,n,i;if(n=[],null!=e)for(t in e)i=e[t],n.push(t+"="+i);return n.join("&")},e.toCamelCase=function(e){return e.toLowerCase().replace(/_(.)/g,function(e,t){return t.toUpperCase()})},e.isFunction=function(e){return"function"==typeof e},e.isObject=function(e){return"object"==typeof e},e.isString=function(e){return"string"==typeof e},e.compact=function(e){var t,n,i,o;for(null==e&&(e=[]),t=[],n=0,i=e.length;n<i;n++)(o=e[n])&&t.push(o);return t},e.shuffle=function(e){var t,n,i;for(t=e.length;0<--t;)i=e[n=~~(Math.random()*(t+1))],e[n]=e[t],e[t]=i;return e},e.random=function(e){return null==e&&(e=1e9),Math.floor(Math.random()*e)},e.keys=function(e){var t,n;for(t in n=[],e)e[t],e.hasOwnProperty(t)&&n.push(t);return n},e.include=function(e,t){return-1!==e.join("|").indexOf(t)},e.isUrl=function(e){return t.test(e)},e.debounce=function(i,o,r){var s;return s=null,function(){var e,t,n;return e=1<=arguments.length?a.call(arguments,0):[],n=this,t=function(){return r||i.apply(n,e),s=null},s?clearTimeout(s):r&&i.apply(n,e),s=setTimeout(t,o||100)}},e.setInterval=function(t,e,n){var i,o,r,s,a,l;return o=this.random(),r=this,a=n,l=o,i=function(){if(r.intervals[l])return!1;if(void 0===a||0<a--){setTimeout(i,s);try{t.call(null)}catch(e){throw a=0,e.toString()}}},setTimeout(i,s=e),o},e.clearInterval=function(e){return this.intervals[e]=1},e}()}.call(this),function(){var o,r=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=["extended","included"],spongecell.Module=function(){function e(){}return e.extend=function(e){var t,n,i;for(t in e)i=e[t],r.call(o,t)<0&&(this[t]=i);return null!=(n=e.extended)&&n.apply(this),this},e.include=function(e){var t,n,i;for(t in e)i=e[t],r.call(o,t)<0&&(this.prototype[t]=i);return null!=(n=e.included)&&n.apply(this),this},e}()}.call(this),function(){var t,h;t="undefined"!=typeof window&&null!==window?window:global,(h=null!=t.spongecell?t.spongecell:t.spongecell={}).Expansion=function(){function e(){}return e.getWindow=function(){var e;return this.allowedAccessToTop()?null!=t&&null!=(e=t.top)?e:window:null!=t?t:window},e.getDocument=function(e){return null==e&&(e="expandable"),this.inIframe()&&"overlay"!==e?t.document:this.getWindow().document},e.documentDimensions=function(){var e,t;return h.Browser.isMobile()?{height:screen.height,width:screen.width}:(e=this.getDocument(),{height:(t=this.getWindow()).innerHeight||e.documentElement.clientHeight||e.body.clientHeight,width:t.innerWidth||e.documentElement.clientWidth||e.body.clientWidth})},e.inIframe=function(){try{return t!==top}catch(e){return e,!0}},e.inFriendlyIframes=function(){try{!0===t.top.window.whatever&&!0}catch(e){return e,!1}return!0},e.allowedAccessToTop=function(){return!(this.inIframe()&&!this.inFriendlyIframes())&&(h.Console.log("allowed access to parent window"),!0)},e.fixedPositionSupported=function(){var e,t,n,i;return i=!(n=1),(e=(t=this.getDocument()).createElement("div")).style.position="fixed",e.style.top="0px",e.style.right="0px",t.body.appendChild(e),"number"==typeof e.offsetTop&&null!==e.offsetTop&&"undefined"!==e.offsetTop&&(n=parseInt(e.offsetTop)),0===n&&(i=!0),e.parentNode.removeChild(e),i},e.panelLargerThanWindow=function(e){var t,n,i;return t=(i=this.getWindow()).innerHeight?i.document.documentElement.clientHeight:i.document.body.scrollHeight,n=i.innerWidth?i.document.documentElement.clientWidth:i.document.body.scrollWidth,t<e.height||n<e.width},e.calcPositions=function(e,t){return t.x||t.y?this.calcAbsolutePositions(e,t):this.fixedPositionSupported()?this.calcFixedPositions(e):this.calcAbsolutePositions(e)},e.calcFixedPositions=function(e){var t,n,i,o,r,s,a,l;return this.getDocument(),this.getWindow(),i=e.height,s=e.width,t=this.documentDimensions().height,n=this.documentDimensions().width,r=(t-i)/2-1,l=this.panelLargerThanWindow(e)||r<0?0:r,a=(o=(n-s)/2-1)<0?0:o,h.Browser.isMobile()?["absolute",0,0]:["fixed",Math.round(a),Math.round(l)]},e.calcAbsolutePositions=function(e,t){var n,i,o,r,s,a,l,u,d,c;return null==t&&(t={}),this.getDocument(),this.getWindow(),o=e.height,u=e.width,t.x=t.x?parseInt(t.x):0,t.y=t.y?parseInt(t.y):0,n=this.documentDimensions().height,i=this.documentDimensions().width,a=(l=this.scrollPositions())[0],s=l[1]+(n-o)/2-1,c=this.panelLargerThanWindow(e)||s<0?0:s,d=(r=a+(i-u)/2-1)<0?0:r,h.Browser.isMobile()?["absolute",0,0]:["absolute",Math.round(d+t.x),Math.round(c+t.y)]},e.scrollPositions=function(){var e,t,n;return t=this.getDocument(),n=this.getWindow(),e=t.body,"number"==typeof n.pageYOffset?[n.pageXOffset,n.pageYOffset]:e&&(e.scrollLeft||e.scrollTop)?[e.scrollLeft,e.scrollTop]:t.documentElement&&(t.documentElement.scrollLeft||t.documentElement.scrollTop)?[t.documentElement.scrollLeft,t.documentElement.scrollTop]:[0,0]},e.safeFrameExpansionParams=function(e){var t,n,i,o,r,s,a,l,u,d,c,h;if(i=e.coords,l=e.initialDims,s=e.expansionDims,o=e.direction,a={push:"push"===(c=e.type)&&$sf.ext.supports()["exp-push"]},"overlay"===c)h=i.win,r=i.exp,u=(h.w-s.width)/2,d=(h.h-s.height)/2,i.self,t=r.l>u?u-r.l:r.l-u,n=r.t>d?d-r.t:r.t-d,a.l=-1*t,a.r=+r.l-a.l+s.width-(+r.l+l.width),a.t=-1*n,a.b=+r.t-a.t+s.height-(+r.t+l.height);else switch(null==o&&(o="down"),o){case"left":a.l=s.width-l.width,s.height>=l.height?a.t=l.height-s.height:a.t=s.height-l.height;break;case"right":a.r=s.width-l.width,s.height>=l.height?a.t=l.height-s.height:a.t=s.height-l.height;break;case"up":a.t=l.height-s.height,s.width>=l.width?a.l=l.width-s.width:a.l=s.width-l.width;break;case"down":a.b=s.height-l.height,s.width>=l.width?a.l=l.width-s.width:a.l=s.width-l.width}return a},e}()}.call(this),function(){"use strict";var e;(null!=(e="undefined"!=typeof window&&null!==window?window:global).spongecell?e.spongecell:e.spongecell={}).Engagement=function(){function e(){}return e.wrapperHtml=function(e){var t,n;return t=e.id,null==(n=e.zIndex)&&(n=5),'<div class="outer-wrapper" '+(t?"id="+t:"")+'\n  style="position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: '+n+';">\n</div>'},e.removeWrappers=function(e){var t,n,i,o,r,s;for(null==e&&(e=null),e?n=[document.getElementById(e)]:null==n&&(n=document.querySelectorAll(".outer-wrapper")),s=[],i=0,o=n.length;i<o;i++)t=n[i],s.push(null!=t&&null!=(r=t.parentNode)?r.removeChild(t):void 0);return s},e.onHover=function(o,e){var r,s,a,t,l,u,d,n,c,h,p,g,f,m;return l=(n=null!=e?e:{}).node,c=n.repeatInterval,l||(this.topOnHoverCallback=o,null==l&&(l=document.querySelectorAll(".wrapper")[0])),t=200,p=32,f=function(e){return r=e.pageX,s=e.pageY},d=u=g=s=r=null,h=function(e){return u=r,d=s,g=setTimeout(function(){return a(e)},t)},m=this,a=function(e){var t,n,i;return n=a.prev,null==r||null==s||null==u||null==d?h(e):(t=Math.abs(r-u)+Math.abs(s-d),i=null==n&&0===t,t<p&&!i?(null!=m.topOnHoverCallback&&(m.topOnHoverCallback(),m.topOnHoverCallback=null),l.removeEventListener("mousemove",f),o!==m.topOnHoverCallback&&(o(),a.prev=null),null!=c?g=setTimeout(function(){return a(e)},c):void 0):(a.prev=i?null:t,h(e)))},l.addEventListener("mouseenter",function(e){return u=e.pageX,d=e.pageY,l.addEventListener("mousemove",f),g=setTimeout(function(){return a(e)},t)}),l.addEventListener("mouseleave",function(){return l.removeEventListener("mousemove",f),r=s=null,clearTimeout(g)})},e}()}.call(this),function(){var e,r;e="undefined"!=typeof window&&null!==window?window:global,(r=null!=e.spongecell?e.spongecell:e.spongecell={}).Event=function(){function e(){}var n;return e.onLoad=function(e){if(!document||"complete"!==document.readyState&&"interactive"!==document.readyState)return"undefined"!=typeof document.addEventListener?document.addEventListener("DOMContentLoaded",e,!1):"undefined"!=typeof window.addEventListener?window.addEventListener("DOMContentLoaded",e,!1):"undefined"!=typeof window.attachEvent?window.attachEvent("onload",e):void 0;setTimeout(function(){return e()},1)},e.on=function(e,t,n){return"undefined"!=typeof document.addEventListener?e.addEventListener(t,n,!1):"undefined"!=typeof document.attachEvent?e.attachEvent("on"+t,n):void 0},e.addMessageListener=function(e,t){return null==t&&(t=window),null!=t.addEventListener?t.addEventListener("message",n(e),!1):null!=t.attachEvent?t.attachEvent("onmessage",n(e)):void 0},n=function(o){return function(e){var t,n;if("mocha-zero-timeout"!==e.data)try{t=JSON.parse(e.data)}catch(i){return n=i,void r.Console.debug("Iframe parse error: %o",n)}return o(t,e)}},e}()}.call(this),function(){"use strict";var e,d;e="undefined"!=typeof window&&null!==window?window:global,(d=null!=e.spongecell?e.spongecell:e.spongecell={}).Broker=function(){function e(){}var l,u,t,n,i,s;return l=null!=d.brokerChannels?d.brokerChannels:d.brokerChannels={},u=null!=d.brokerClients?d.brokerClients:d.brokerClients={},i=null!=d.brokerChannels?d.brokerChannels:d.brokerChannels={},n=function(){return d.Utils.random(1e5)+"_"+ +new Date},function(e){return i[e]},s=function(e,t){return i[e]=t},t=function(t){var e;return e="call"+t,null==d.callbacks&&(d.callbacks={}),d.callbacks[e]=function(e){return i[t](e)},"spongecell.callbacks."+e},e.registerCallbackFn=function(o){var r;return r=n(),s(r,function(){var e,t,n,i;for(e in o.apply(null,arguments),n=[],t=d.requestMap)i=t[e],n.push(-1<i.indexOf(r)?delete t[e]:void 0);return n}),t(r)},e.registerChannels=function(e,t,n){var i,o,r,s,a;for(a in d.Console.group("Registering Channels for %s, %o",e,t),o={},t)s=t[a],null!=(i=function(){switch(a){case"feature":return d.FeatureChannel;case"hooks":return d.HooksChannel;case"loading":return d.LoadingChannel;case"mraid":return d.MRAIDChannel;case"nav":return d.NavChannel;case"panel":return d.PanelChannel;case"setup":return d.SetupChannel;case"tracking":return d.TrackingChannel;case"vpaid":return d.VPAIDChannel;case"externalPage":return d.ExternalPageChannel}}())&&(d.Console.debug("Initializing Channel: %s with %o",a,s),o[a]=new i(e,s,n));for(a in l[e]=o)r=o[a],d.Console.debug("Starting Channel: %s",a),r.start();return d.Console.groupEnd(),o},e.channelExists=function(e,t){return l[e]&&l[e][t]},e.registerClient=function(e,t){return null==u[e]&&(u[e]=[]),u[e].push(t)},e.clientRegistered=function(e){var t;return 0<(null!=(t=u[e])?t.length:void 0)},e.sendOnChannel=function(e,t){var n,i,o,r,s,a;if(e.iid&&(n=l[e.iid]),null!=n&&null!=(o=n[e.topic])&&o.send(e,t),null!=(i=u[e.topic])){for(a=[],r=0,s=i.length;r<s;r++)t=i[r],a.push(t(e));return a}},e}()}.call(this),function(){"use strict";var e,t,a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};e="undefined"!=typeof global&&null!==global?global:window,(t=null!=e.spongecell?e.spongecell:e.spongecell={}).ElementContainer={extended:function(){return this.include({preventElementClickThrough:!1,_initElementContainer:function(){return null==this.elements&&(this.elements=[]),this.animationsByIid={},this.initialEffectsByIid={}},addUuid:function(e){if(e)return null==this.itemUuids&&(this.itemUuids=[]),-1===this.itemUuids.indexOf(e)?this.itemUuids.push(e):void 0},getTrackingKey:function(){return this.name},getUniqueTrackingKey:function(){return this.getTrackingKey()},getElements:function(e){var t,n,i,o,r,s;if(!e)return this.elements;for(n=[],i=0,o=(r=this.elements).length;i<o;i++)s=(t=r[i]).type,0<=a.call(e,s)&&n.push(t);return n},getFeatureElements:function(){return this.getElements(["feature"])},getElementByName:function(e){var t,n,i,o;for(n=0,i=(o=this.elements).length;n<i;n++)if((t=o[n]).name===e)return t;return null},getElementByIid:function(e){var t,n,i,o;for(n=0,i=(o=this.elements).length;n<i;n++)if((t=o[n]).iid===e)return t;return null},getCurrentCarousel:function(){var e,t,n,i,o,r;for(e=null,n=0,i=(o=this.getFeatureElements()).length;n<i;n++)if("mediaCarousel"===(null!=(r=(t=o[n]).feature)?r.type:void 0)){e=t.component;break}return{carousel:e,slide:null!=e?e.getCurrentSlide():void 0}},getItemsAtIndex:function(e){var t,n;for(n in t=[],this.ad.dynamicItems)this.ad.dynamicItems[n][e]&&t.push(this.ad.dynamicItems[n][e]);return t},checkDynamicContentIndex:function(e,t){var n,i,o;for(n=0,i=(o=this.getItemsAtIndex(e.itemIndex)).length;n<i;n++)if(null!=o[n][t])return!0;return!1},getDynamicContentAtIndex:function(e,t,n){var i,o,r,s,a,l;for(i=null,o=0,s=(a=this.getItemsAtIndex(e.itemIndex)).length;o<s;o++)if(null!=(l=(r=a[o])[t])?l[n]:void 0){i=r[t][n];break}return i},getAsset:function(o){var e,t,r;if(o)return r=this,t=function(){var e,t,n,i;if(null!=(e=null!=o?o.masterAssetId:void 0))return null!=(t=null!=(n=r.assets)?n[e]:void 0)?t:null!=(i=r.ad.assets)?i[e]:void 0},null!=o.itemIndex?null==(e=this.getDynamicContentAtIndex(o,"assets",o.masterAssetId))&&(e=t()):e=t(),this._cacheViewedUuid(e),e},getAssetUrl:function(e){var t;return null!=(t=this.getAsset(e))?t.url:void 0},getLandingPage:function(e){var t,n,i,o,r,s,a;if(e)return(n=this.overridePreviewClicktag(e))?n:(i=e.landingPageKey,a=this,t=function(){var e;return(null!=(e=a.landingPages)?e:a.ad.landingPages)[i]},null!=e.itemIndex?(null==(r=this.getDynamicContentAtIndex(e,"landingPages",i))&&(r=t()),o=null!=r?{key:i,url:r}:null):o=null!=(s=t())?{key:i,url:s}:null,o)},getProperty:function(i){var e,t,o;return o=this,e=function(){var e,t,n;return null!=(e=null!=(t=o.properties)?t[i.propertyId]:void 0)?e:null!=(n=o.ad.properties)?n[i.propertyId]:void 0},null!=i.itemIndex?null==(t=this.getDynamicContentAtIndex(i,"properties",i.propertyId))&&(t=e()):t=e(),this._cacheViewedUuid(t),t},resetEffectCalls:function(){return this.totalEffectCalls=t.Animation.totalEffects(this.animations||[]),this.effectsCalled=0},trackStart:function(){return this.ad.track("start",this.getTrackingKey(),{baseFeature:"screen",featureId:this.getId()})},overridePreviewClicktag:function(e){if(this.ad.isPreview&&this.ad.isCreativeLibrary&&e.clicktag&&-1!==e.clicktag)return{url:"https://creativepreview.flashtalking.net/clicktag/"+e.clicktag}},_cacheViewedUuid:function(e,t){var n;if(null==t&&(t=null),null==t&&(t=this.getUniqueTrackingKey()),null!=e?e.itemUuid:void 0)return null!=(n=this.ad.uuidManager)?n.cacheViewedUuid(e.itemUuid,t):void 0}})}}}.call(this),function(){"use strict";var e,D;e="undefined"!=typeof global&&null!==global?global:window,(D=null!=e.spongecell?e.spongecell:e.spongecell={}).HtmlElementContainer={extended:function(){return this.include({_setupElementContainer:function(){return this._createElements()},_createElements:function(o){var r;return null==o&&(o=200),this.elements=function(){var e,t,n,i;for(i=[],e=0,t=(n=this.elements||[]).length;e<t;e++)(r=n[e]).ad=this.ad,r.zIndex=o,o++,i.push(D.HtmlElement.create(this,r));return i}.call(this)},_renderElements:function(){var e,t,n,i,o;for(o=[],t=0,n=(i=this.elements||[]).length;t<n;t++)"animation"!==(e=i[t]).type?o.push(e.render(this.$el)):o.push(void 0);return o},_delegateElementEvents:function(){var e,t,n,i,s,o,r,a,l,u,d,c,h,p,g,f,m,v,y,w,b,S,k,_,x,C,E,P,A,M,I,T,L,F;if(null==(m=this.ad)||!m.canvasMode){for(u=0,h=(v=this.elements).length;u<h;u++)(s=v[u]).delegateEvents();var B,O,H,U;for(g=function(t,n,i){return null==i&&(i=null),function(e){if(!B.ad.animationMode)return B.panel.openScreen(n,t,i),null!=e?(e.stopPropagation(),e.preventDefault()):void 0}},r=function(r,n){return function(e){var t;if(null==(t=function(){var e,t,n,i,o;for(o=[],e=0,t=(n=this.elements).length;e<t;e++)(null!=(i=(s=n[e]).feature)?i.id:void 0)===r&&o.push(s.component);return o}.call(O)[0])&&(t=O.component),null!=t&&t.handleAction(n,e),null!=e)return e.stopPropagation(),e.preventDefault()}},f=function(t){return function(e){return"open"===t&&(H.panel.removeLoader(),H.panel.cancelShowLoader()),e.preventDefault(),e.stopPropagation(),"function"==typeof H.trackClick&&H.trackClick(e),H.ad[t]()}},i=function(t){return function(e){if(e.preventDefault(),e.stopPropagation(),"function"==typeof U.trackClick&&U.trackClick(e),"remove"===t)return U.ad.remove()}},L=[],c=0,p=(C=null!=(x=(U=H=O=B=this).elements)?x:[]).length;c<p;c++)if(s=C[c],e=$(this.panel.doc.getElementById("elem-"+s.iid)),null!=(null!=(E=s.action)?E.screen:void 0)||null!=(null!=(P=s.action)?P.feature:void 0)||null!=(null!=(A=s.action)?A.panel:void 0)||null!=(null!=(M=s.action)?M.ad:void 0)){if(null!=(d=null!=(I=s.action)?I.screen:void 0)){if(null==(F=this.panel.getScreen(d)))continue;a=g(this._getSelfOrParentScreen(),F,s.transition)}else a=(t=null!=(T=s.action)&&null!=(y=T.panel)?y.action:void 0)?f(t):(t=null!=(w=s.action)&&null!=(b=w.ad)?b.action:void 0)?i(t):r((o=null!=(S=s.action)?S.feature:void 0).id,o.action);n=function(t,n,i){return function(e){return i||n.trackStart(),t(e)}}(a,this,!!s.action.feature),e.on("tap click",n),l=null!=(k=s.action)&&null!=(_=k.panel)?_.action:void 0,"dual"!==s.action.interaction||D.Browser.isMobile()||l?L.push(void 0):L.push(D.Engagement.onHover(n,{node:e[0]}))}else L.push(void 0);return L}},_delegateAnimationEvents:function(){var e,t,n,i,o;if(this.animations){for(D.Animation.setLastAnimation(this.animations),o=[],t=0,n=(i=this.elements).length;t<n;t++)e=i[t],this.animationsByIid[e.originalIid]?o.push(e.delegateAnimationEvents()):o.push(void 0);return o}},_loadElements:function(){var e,t,n,i,o,r,s,a,l,u,d,c,h;for(t=0,r=(u=this.elements).length;t<r;t++){if((e=u[t]).feature)for(i=0,s=(c=null!=(d=e.feature.items)?d:[]).length;i<s;i++)n=c[i],this.addUuid(n.item_id);else if(l=e.getProcessorItems())for(o=0,a=(h=null!=l?l:[]).length;o<a;o++)n=h[o],this.addUuid(n.item_id);e.loaded||this._shouldDelayLoad()||e.load()}},_shouldDelayLoad:function(){var e,t,n;return!this.panel.loadTriggered&&(!(-1<this.panel.getTransitionScreens().indexOf(this.iid))&&(this.ad.animationMode?this.iid!==this.ad.animationScreen:!this.ad.engaged&&this.ad.delayLoading&&!("home"===(e=this.iid)||e===(null!=(t=this.panel.persistentLayer)?t.iid:void 0))&&"home"!==(null!=(n=this.component)?n.container.iid:void 0)))},_engageElements:function(){var e,t,n,i,o,r;for(r=[],t=0,n=(o=null!=(i=this.elements)?i:[]).length;t<n;t++)e=o[t],r.push("function"==typeof e.engage?e.engage():void 0);return r},_getSelfOrParentScreen:function(){return this},_resetInlineVideos:function(){var e,t,n,i,o;for(o=[],n=0,i=(t=this.getFeatureElements()).length;n<i;n++)"video"===(e=t[n]).feature.type?o.push(e.resetInlineVideo()):o.push(void 0);return o},resetElements:function(){var e,t,n,i,o,r;for(r=[],t=0,n=(o=null!=(i=this.elements)?i:[]).length;t<n;t++)e=o[t],r.push(e.loaded=!1);return r},restoreElementPositions:function(){var e,t,n,i,o,r,s,a,l,u,d;if("multiple"===(null!=(r=this.animationSettings)?r.play:void 0)||null!=(s=this.animationSettings)&&s.loops){for(n=this.panel._allElementsByIid(),d=[],i=0,o=(l=null!=(a=this.animations)?a:[]).length;i<o;i++)(t=n[(e=l[i]).elementIid])?d.push(D.Animation.applyInitialEffects(t.$(),null!=(u=this.initialEffectsByIid[t.originalIid])?u[e.iid]:void 0,t.getPositionCss())):d.push(void 0);return d}}})}}}.call(this),function(){var e,n,i=function(e,t){function n(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;e="undefined"!=typeof global&&null!==global?global:window,(n=null!=e.spongecell?e.spongecell:e.spongecell={}).Screen=function(e){function t(e,t){this.panel=e,n.Console.log("Initializing Screen %o from %o",this,t),n.Utils.extend(this,t),this.ad=this.panel.ad,this._initElementContainer()}return i(t,e),t.extend(n.ElementContainer),t.prototype.getId=function(){return this.iid},t.prototype.getName=function(){return this.name},t.prototype.getUniqueTrackingKey=function(){return"screen-"+this.getTrackingKey()},t.prototype.getFeatures=function(){var e,t,n,i,o;for(t=[],n=0,i=(o=this.getFeatureElements()).length;n<i;n++)e=o[n],t.push(e.feature);return t},t.prototype.getElement=function(e){var t,n,i,o,r;for(n=null,i=0,o=(r=this.elements).length;i<o;i++)if((t=r[i]).iid===e){n=t;break}return n},t.prototype.isBusy=function(){var e,t,n;for(e=0,t=(n=this.getFeatureElements()).length;e<t;e++)if(n[e].component.isBusy())return!0;return!1},t.prototype.load=function(){},t.prototype.engage=function(){var e,t,n,i,o;if(this.ad.engaged){for(o=[],t=0,n=(i=this.getFeatures()).length;t<n;t++)e=i[t],o.push(e.engage());return o}},t}(n.Module)}.call(this),function(){var e,c,t=function(e,t){function n(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;e="undefined"!=typeof global&&null!==global?global:window,(c=null!=e.spongecell?e.spongecell:e.spongecell={}).HtmlScreen=function(e){function n(e,t){n.__super__.constructor.call(this,e,t)}return t(n,e),n.extend(c.HtmlElementContainer),n.prototype.setup=function(){return this.setupScreenSize(),this._setupElementContainer(),this.ad.eventManager.subscribe("resize:"+this.ad.iid,(e=this,function(){return e.setupScreenSize()}));var e},n.prototype.setupScreenSize=function(){return this.width=this.panel.width*this.panel.scale.magnitude,this.height=this.panel.height*this.panel.scale.magnitude,this.tall=this.height>3*this.width,this.wide=this.width>7*this.height},
n.prototype.render=function(){var e;return this.setup(),this.panel.$el.append(this._html()),this.$el=$(this.panel.doc.getElementById("screen-"+this.getId()+"-"+(null!=(e=this.panel.type)?e:"panel"))),this.panel.background?this.$el.css({background:"transparent"}):this.$el.css({backgroundColor:"#fff"}),this.hide(),this._renderElements(),this._delegateEvents()},n.prototype._delegateEvents=function(){return this._delegateElementEvents(),this._delegateAnimationEvents()},n.prototype.load=function(){return n.__super__.load.apply(this,arguments),this._loadElements()},n.prototype.engage=function(){if(this.ad.engaged)return n.__super__.engage.apply(this,arguments),this._engageElements()},n.prototype.checkAutoLaunchFeatures=function(){var e,t,n,i,o,r,s,a;if("home"!==this.getId()||this.ad.basePanel!==this.panel){for(a=[],t=0,n=(i=this.getFeatureElements()).length;t<n;t++)e=i[t],-1<["mediaCarousel","video"].indexOf(null!=(o=e.feature)?o.type:void 0)&&!e.launched&&(null!=(r=e.feature)?r.launchOnOrBeforeEngagement():void 0)?a.push(null!=(s=e.component)?s.launch():void 0):a.push(void 0);return a}},n.prototype.startTransition=function(e,t){var n,i,o,r;return null==t&&(t=!0),e?(this.$el.addClass("preserve-3d"),n=function(e){if(e.target===r.$el[0])return r.animations&&r.restoreElementPositions(),r._transitionEnd(t),r.$el.off("animationend webkitAnimationEnd")},(r=this).$el.on("animationend webkitAnimationEnd",n),i=t?"in":"out",setTimeout((o=this,function(){return o._addTransition(e,i)}))):(t?this.show():this.hide(),this.checkAutoLaunchFeatures())},n.prototype.hide=function(){var e,t,n,i;for(e=0,t=(n=this.getFeatureElements()).length;e<t;e++)null!=(i=n[e].component)&&i.stop();return this.makeInvisible()},n.prototype.show=function(){var e,t,n,i,o;return"home"!==this.getId()&&this.ad.loadNonHomeElements(),this.makeVisible(),this.ad.canvasMode||c.Animation&&this.animations&&this.animations.length&&(this.resetEffectCalls(),this.remainingLoops=null!=(e=null!=(t=this.animationSettings)?t.loops:void 0)?e:0,"multiple"===(null!=(n=this.animationSettings)?n.play:void 0)?this.ad.eventManager.publish(this.panel.iid+":screen:"+this.iid+":load"):"multiple"!==(null!=(i=this.animationSettings)?i.play:void 0)&&(this.animationLoaded||(this.ad.eventManager.publish(this.panel.iid+":screen:"+this.iid+":load"),this.animationLoaded=!0))),this.engage(),null!=(o=this._animationElement())&&o.render(),c.Browser.isSafari()&&!this.ad.canvasMode&&this._reloadElements(),this._resetInlineVideos(),this.ad.uuidManager.trackViewed(this.getUniqueTrackingKey())},n.prototype.makeInvisible=function(){return this.visible=!1,this.$el.css(this._invisibleCss())},n.prototype.makeVisible=function(){return this.visible=!0,this.$el.css(this._visibleCss())},n.prototype.setLayoutMode=function(e){return e?this.$el.addClass("layout-mode"):this.$el.removeClass("layout-mode")},n.prototype._invisibleCss=function(){return c.Browser.isSafari()?{display:"none",pointerEvents:"none"}:{opacity:0,zIndex:-1,pointerEvents:"none"}},n.prototype._visibleCss=function(){return c.Browser.isSafari()?{display:"block",pointerEvents:"auto"}:{opacity:1,zIndex:1,pointerEvents:"auto"}},n.prototype._addTransition=function(e,t){var n,i,o,r,s,a,l,u,d;for(o=e.direction,r=e.duration?1e3*e.duration:c.Animation.defaultDuration,s=e.easing,d=null!=(u=e.type)?u:e.transition,this.animating=!0,this.$el.css($.extend({},this._visibleCss(),{width:"100%",height:"100%"})),i=c.Animation.getAnimations(d,o),this.transitions=[],a=0,l=i.length;a<l;a++)n=i[a],this.transitions.push(n[t]);return c.Animation.addAnimation(this.$el,{animations:this.transitions,easing:s,duration:r,entry:t,type:d})},n.prototype._transitionEnd=function(e){return null==e&&(e=!0),e?this.show():this.hide(),this.checkAutoLaunchFeatures(),c.Animation.removeAnimation(this.$el,this.transitions),this.panel.background&&this.$el.css({width:"auto",height:"100%"}),this.animating=!1},n.prototype.trackClick=function(e){var t,n,i,o,r,s,a;if(null!=e){for(n=0,i=(o=this.getFeatureElements()).length;n<i;n++)"video"===(t=o[n]).feature.type&&null!=(r=t.component)&&r.stop();return this.ad.track("clickEvent",this.getTrackingKey(),{x:null!=(s=e.clientX)?s:e.x,y:null!=(a=e.clientY)?a:e.y,partition:this.getTrackingKey()}),this.ad.track("start",this.getTrackingKey(),{baseFeature:"screen",featureId:this.getId()})}},n.prototype._html=function(){var e,t;return e=this.panel.background?"has-background":"",'<div id="screen-'+this.getId()+"-"+(null!=(t=this.panel.type)?t:"panel")+'" class="screen '+e+'">\n</div>'},n.prototype._animationElement=function(){var e;return null!=(e=this.getElements(["animation"]))?e[0]:void 0},n.prototype.hasAnimation=function(){return!!this._animationElement()},n.prototype._reloadElements=function(){return this.$el.css("zIndex",+this.$el.css("zIndex")+1),setTimeout((e=this,function(){e.$el.css("zIndex",+e.$el.css("zIndex")-1)}),10);var e},n.prototype._renderDiv=function(){return this.$el},n}(c.Screen)}.call(this),function(){var e,s,n=function(e,t){function n(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;e="undefined"!=typeof global&&null!==global?global:window,(s=null!=e.spongecell?e.spongecell:e.spongecell={}).AdPanel=function(e){function t(e){var o,r;this.settings=e,this.iid=s.Utils.generateIID(),this.ad=this.settings.ad,this.responsive=this.settings.responsive,this.vpaid=this.settings.vpaid,s.Console.log("Initializing Panel: %o",this.settings),o=this.responsive?"ResponsiveScreen":"HtmlScreen",this.screens=function(){var e,t,n,i;for(i=[],e=0,t=(n=this.settings.screens).length;e<t;e++)(r=n[e]).ad=this.ad,i.push(new s[o](this,r));return i}.call(this)}return n(t,e),t.prototype.setup=function(){return"function"==typeof this._render&&this._render(),this.ad.canvasMode||"function"==typeof this._delegateEvents&&this._delegateEvents(),this._setup()},t.prototype._setup=function(){return Promise.resolve(!0)},t.prototype.getHomeScreen=function(){return this.getScreen("home")},t.prototype.getScreen=function(e){var t,n,i,o;for(t=0,n=(i=this.screens).length;t<n;t++)if((o=i[t]).iid===e)return o},t.prototype.getTransitionScreens=function(){var e,t,n,i,o,r,s,a,l,u,d;for(d=[],t=0,n=(i=this.screens).length;t<n;t++)u=null!=(o=(l=i[t]).animationSettings)&&null!=(r=o.navigation)?r.toScreen:void 0,e=null!=(s=l.animationSettings)&&null!=(a=s.navigation)?a.disabled:void 0,u&&"none"!==u&&!e&&d.push(u);return d},t}(s.Module)}.call(this),function(){"use strict";var e,n,i=function(e,t){function n(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;e="undefined"!=typeof global&&null!==global?global:window,(n=null!=e.spongecell?e.spongecell:e.spongecell={}).OmnipresentHtmlScreen=function(e){function t(e,t){this.panel=e,this.elements=t,this.ad=this.panel.ad,this.persistent=!0,this.animations=[],this.iid=n.Utils.generateIID(),this._initElementContainer(),this._setupElementContainer()}return i(t,e),t.extend(n.ElementContainer),t.extend(n.HtmlElementContainer),t.prototype._html=function(){return'<div id="persistent-layer_'+this.iid+'" class="persistent-layer">\n</div>'},t.prototype.render=function(){return this.width=this.panel.width*this.panel.scale.magnitude,this.height=this.panel.height*this.panel.scale.magnitude,this.panel.$el.append(this._html()),this.$el=$(this.panel.doc.getElementById("persistent-layer_"+this.iid)),this._renderElements(),this._delegateElementEvents(),this._delegateAnimationEvents()},t.prototype._delegateAnimationEvents=function(){var o,e,t,n,i,r;for({},i=[],e=0,t=(n=this.panel.screens).length;e<t;e++)r=n[e],i.push(function(){var e,t,n,i;for(i=[],e=0,t=(n=this.elements).length;e<t;e++)o=n[e],r.animationsByIid[o.originalIid]?i.push(o.delegateAnimationEvents(r.animationsByIid[o.originalIid],r.iid)):i.push(void 0);return i}.call(this));return i},t.prototype.load=function(){return this.ad.eventManager.publish(this.panel.iid+":screen:"+this.iid+":load"),this._loadElements()},t.prototype.updateState=function(){var e,t,n,i,o,r;for(r=[],t=0,n=(o=null!=(i=this.elements)?i:[]).length;t<n;t++)e=o[t],r.push("function"==typeof e.updateState?e.updateState():void 0);return r},t.prototype.moveBelowAnimation=function(){return this.$el.css("zIndex",-1)},t.prototype.showAfterAnimation=function(){return this.$el.css("zIndex",20)},t.prototype._shouldDelayLoad=function(){return!1},t.prototype.trackClick=function(e){var t;return null==(t=this._getSelfOrParentScreen())&&(t=this.panel.getHomeScreen()),t.trackClick(e)},t.prototype._getSelfOrParentScreen=function(){return this.panel.currentScreen},t.prototype.getTrackingKey=function(){var e;return(null!=(e=this.panel.currentScreen)?e:this.panel.screens[0]).getTrackingKey()},t.prototype.getId=function(){return this.panel.currentScreen.getId()},t}(n.Module)}.call(this),function(){var e,y;e="undefined"!=typeof global&&null!==global?global:window,(y=null!=e.spongecell?e.spongecell:e.spongecell={}).HtmlElement=function(){function e(e,t){this.container=e,this.settings=t,y.Console.log("Initializing HTML Element on %s: %o",this.container.name,this.settings),y.Utils.extend(this,this.settings),this.panel=this.container.panel,this.setDefaults()}var v;return v=["onTap","onClick","onHover"],e.create=function(e,t){var n,i,o;return 1<(null!=(i=t.type)?i.length:void 0)&&(n="Html"+i[0].toUpperCase()+i.slice(1)+"Element"),new(null!=(o=y[n])?o:y.HtmlElement)(e,t)},e.prototype.setDefaults=function(){var e;return null==this[e=this.type]&&(this[e]={}),null==this.position&&(this.position={top:0,left:0}),null==this.size&&(this.size={width:this.panel.width,height:this.panel.height}),this.originalIid=this.originalIid||this.iid,this._setRenderDimensions()},e.prototype._setRenderDimensions=function(){var e,t;return this.magnitude="anchored"===this.positionType?1:this.panel.scale.magnitude,this.fullscreen?(this.width="100%",this.height="100%"):((null!=(e=this.ad)?e.mraid:void 0)?(screen.width,screen.height):(null!=(t=this.ad)?t.safeFrames:void 0)?(this.panel.width,this.panel.height):("overlay"===this.panel.expansionType?this.panel.doc.body.clientWidth:Math.max(window.innerWidth,this.panel.width),"overlay"===this.panel.expansionType?this.panel.doc.body.clientHeight:Math.max(window.innerHeight,this.panel.height)),this.width=this.size.width*this.magnitude,this.height=this.size.height*this.magnitude)},e.prototype.render=function(e){var t,n,i,o;return this.$screen=e,this._setRenderDimensions(),this.$el=t=this.$elem(),this.$screen.append(t),t.attr("id","elem-"+this.iid),t.addClass("element"),(null!=(n=this.ad)&&null!=(i=n.lockedElements)?i[this.iid]:void 0)&&t.addClass("locked"),t.css(this._buildCss()),this.ad.eventManager.subscribe("resize:"+this.ad.iid,(o=this,function(){return o.setDefaults(),t.css(o._buildCss())})),t},e.prototype.$elem=function(){return $("<div></div>")},e.prototype.delegateEvents=function(){var e,i;return y.Engagement.onHover((e=this,function(){return e.ad.eventManager.publish("element:"+e.iid+":hover")}),{node:this.$()[0]}),this.$().on("tap click",(i=this,function(e){var t,n;if(i.ad.eventManager.publish("element:"+i.iid+":click"),y.Browser.isMobile()&&i.ad.eventManager.publish("element:"+i.iid+":hover"),null!=(n=i.container.getLandingPage(i.action)))return"function"==typeof(t=i.container).trackClick&&t.trackClick(e,i),i.container.preventElementClickThrough||i.ad.completionClickThrough(i.container._getSelfOrParentScreen().name,{elementAction:i.action,landingPage:n,description:"Clicked "+i.name,baseFeature:"screen",featureId:i.container._getSelfOrParentScreen().getId(),processorId:i._getProcessorId(),elementId:i.iid}),e.stopPropagation(),e.preventDefault()}))},e.prototype.applyAnimation=function(e,t,n){var i,o,r,s;return null==t&&(t=null),null==n&&(n=!1),o=null,this.lastAnimatedScreen?this.lastAnimatedScreen!==this.panel.currentScreen&&(this.lastAnimatedScreen=this.panel.currentScreen,this.container.persistent&&(o=this.getPositionCss())):this.lastAnimatedScreen=null!=(r=this.panel.currentScreen)?r:"home",this.lastAnimatedScreen=this.panel.currentScreen,i=t?this.panel.getScreen(t):this.container,y.Animation.applyInitialEffects(this.$(),null!=(s=this.container.initialEffectsByIid[this.originalIid])?s[e.iid]:void 0,o),n&&i.restoreElementPositions(),y.Animation.startElementAnimation(this.$el,e,this.ad.eventManager,i),this.ad.eventManager.publish(this.panel.iid+":animation:"+e.iid+":start")},e.prototype.delegateAnimationEvents=function(e,t){var n,i,o,r,s,a,l,u,d,c,h,p,g,f,m;if(null==e&&(e=null),null==t&&(t=null),!this.ad.canvasMode){for(null==(u=t)&&(t=this.container.iid),a=y.Slide&&this.container instanceof y.Slide?this.container.iid:null,null==e&&(e=this.container.animationsByIid[this.originalIid]),s=y.Animation.generate(this.$el,e,this.container),i=a?null!=(c=this.container)?c.animations:void 0:null!=(h=this.panel.getScreen(t))?h.animations:void 0,this.container.initialEffectsByIid[this.originalIid]=s,o=y.Animation.getFirstAnimation(e,i),y.Animation.applyInitialEffects(this.$(),null!=(p=this.container.initialEffectsByIid[this.originalIid])?p[o.iid]:void 0),m=[],r=0,l=e.length;r<l;r++)switch(n=e[r],-1<v.indexOf(n.trigger)&&this.$el.addClass("animation-interactive"),n.trigger){case"withPrevious":(d=y.Animation.getPrevious(n.iid,i))?m.push(this.ad.eventManager.subscribe(this.panel.iid+":animation:"+d.iid+":start",this.applyAnimation.bind(this,n,u))):m.push(this.ad.eventManager.subscribe(this.panel.iid+":screen:"+t+":load",this.applyAnimation.bind(this,n,u)));break;case"afterPrevious":(d=y.Animation.getPrevious(n.iid,i))?m.push(this.ad.eventManager.subscribe(this.panel.iid+":animation:"+d.iid+":end",this.applyAnimation.bind(this,n,u))):m.push(this.ad.eventManager.subscribe(this.panel.iid+":screen:"+t+":load",this.applyAnimation.bind(this,n,u)));break;case"onScreenLoad":this.ad.eventManager.subscribe(this.panel.iid+":screen:"+t+":load",this.applyAnimation.bind(this,n,u)),m.push(this.ad.eventManager.subscribe(this.panel.iid+":startNextLoop:"+t,this.applyAnimation.bind(this,n,u,!0)));break;case"onSlideLoad":this.ad.eventManager.subscribe(this.panel.iid+":screen:layout:"+a+":load",this.applyAnimation.bind(this,n,null)),m.push(this.ad.eventManager.subscribe(this.panel.iid+":startNextLoop:"+a,this.applyAnimation.bind(this,n,null,!0)));break;case"onClick":case"onTap":m.push(this.ad.eventManager.subscribe("element:"+this.iid+":click",this.applyAnimation.bind(this,n,u)));break;case"onHover":m.push(this.ad.eventManager.subscribe("element:"+this.iid+":hover",this.applyAnimation.bind(this,n,u)));break;case"onVideoStart":m.push(this.ad.eventManager.subscribe(this.panel.iid+":screen:"+t+":videoStart",this.applyAnimation.bind(this,n,u)));break;case"videoTime":this.ad.eventManager.addTime(null!=(g=n.time)?g:0),m.push(this.ad.eventManager.subscribe(this.panel.iid+":screen:"+t+":videoTime:"+(null!=(f=n.time)?f:0),this.applyAnimation.bind(this,n,u)));break;default:m.push(void 0)}return m}},e.prototype.load=function(){var e,t,n,i,o,r,s,a,l;if("animation"!==this.type&&(this.loaded=!0),((null!=(e=this.action)?e.screen:void 0)||null!=(null!=(t=this.action)?t.landingPageKey:void 0)||(null!=(n=this.action)?n.feature:void 0)||(null!=(i=this.action)?i.panel:void 0)||(null!=(o=this.action)?o.ad:void 0)||(null!=(r=this.action)?r.clicktag:void 0))&&null!=(s=this.$el)&&s.addClass("has-action"),(null!=(a=this.action)?a.panel:void 0)&&"dual"===this.action.interaction)return null!=(l=this.$el)?l.addClass("hover-expand"):void 0},e.prototype.engage=function(){},e.prototype.$=function(e){return null!=e?this.$el.find(e):this.$el},e.prototype._getProcessorId=function(){var e,t,n,i,o;return this.image?null!=(e=this.image.processorId)?e:null!=(t=this.action)?t.processorId:void 0:this.customButton?null!=(n=null!=(i=this.customButton.upState)?i.processorId:void 0)?n:null!=(o=this.action)?o.processorId:void 0:void 0},e.prototype.getProcessorItems=function(){var e,t,n,i,o,r,s,a,l,u,d;return this.image&&this.image.processorId?n=this.image.processorId:this.customButton&&(null!=(i=this.customButton.upState)?i.processorId:void 0)?n=null!=(o=this.customButton.upState)?o.processorId:void 0:this.text&&this.text.processorId&&(n=this.text.processorId),n?(e=null!=(r=this.ad.features.filter(function(e){return e.processorId===n}))?r[0]:void 0)?(t=null!=(s=null!=(a=null!=(l=this.action)?l.itemIndex:void 0)?a:null!=(u=this.text)?u.itemIndex:void 0)?s:0,(null!=(d=e.items)?d[t]:void 0)?[e.items[t]]:null):void 0:null},e.prototype.getPositionCss=function(){var e,t,n,i;for(e in n={},t="anchored"===this.positionType?this.anchorPosition:this.position)i=t[e],t.hasOwnProperty(e)&&(n[e]="left"===e||"right"===e?i*this.container.width:i*this.container.height);return n},e.prototype._buildCss=function(){var e,t,n,i,o,r,s,a,l,u,d,c,h,p,g,f,m,v,y;return"overlay"===this.panel.expansionType?(g=this.ad.mraid?null!=(s=this.ad.topDimensions)?s.height:void 0:null!=(a=this.panel.doc)&&null!=(l=a.body)?l.clentHeight:void 0,f=this.ad.mraid?null!=(u=this.ad.topDimensions)?u.width:void 0:null!=(d=this.panel.doc)&&null!=(c=d.body)?c.clientWidth:void 0):(g=window.innerHeight,f=window.innerWidth),h=this.container.persistent&&this.panel.responsive&&"y"===this.panel.scale.dimension?(g-this.container.height)/2:0,o=this.container.persistent&&this.panel.responsive&&"x"===this.panel.scale.dimension?(f-this.container.width)/2:0,e=function(){var e,t,n,i,o;return e={},(null!=(t=m.anchorPosition)?t.hasOwnProperty("left"):void 0)&&(e.left=m.panel.width*m.anchorPosition.left),(null!=(n=m.anchorPosition)?n.hasOwnProperty("right"):void 0)&&(e.right=m.panel.width*m.anchorPosition.right),(null!=(i=m.anchorPosition)?i.hasOwnProperty("top"):void 0)&&(e.top=m.panel.height*m.anchorPosition.top),(null!=(o=m.anchorPosition)?o.hasOwnProperty("bottom"):void 0)&&(e.bottom=m.panel.height*m.anchorPosition.bottom),e},r=function(){var e,t,n;return(e={}).left=(null!=(t=v.position)?t.left:void 0)?v.container.width*v.position.left+o:0,e.top=(null!=(n=v.position)?n.top:void 0)?v.container.height*v.position.top+h:0,e},t=function(e){return y.horizontallyCenter.disabled||y.verticallyCenter.disabled?y.horizontallyCenter.disabled?(e.top=0,e.bottom=0,$.extend(e,{margin:"auto 0"})):(e.right=0,e.left=0,$.extend(e,{margin:"0 auto"})):(e.top=0,e.right=0,e.bottom=0,e.left=0,$.extend(e,{margin:"auto auto"}))},n={position:"absolute",zIndex:(y=v=m=this).zIndex,width:this.width,height:this.height},i=this.horizontallyCenter&&!this.horizontallyCenter.disabled,p=this.verticallyCenter&&!this.verticallyCenter.disabled,"anchored"===this.positionType?($.extend(n,e()),(i||p)&&t(n)):$.extend(n,r()),n},e}()}.call(this),function(){"use strict";var t,o,r,s,a,l,e,d,u=function(e,t){return function(){return e.apply(t,arguments)}},n=function(e,t){function n(){this.constructor=e}for(var i in t)c.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;e="undefined"!=typeof global&&null!==global?global:window,d=null!=e.spongecell?e.spongecell:e.spongecell={},t=d.OmnipresentHtmlScreen,r="expanding-animation",a=500,o=2700,s=l=null,d.HtmlAdPanel=function(e){function i(e){var t,n;this.settings=e,this.showLoader=u(this.showLoader,this),this._animationCompleted=u(this._animationCompleted,this),this.cancelShowLoader=u(this.cancelShowLoader,this),this.expandPanel=u(this.expandPanel,this),this.removeLoader=u(this.removeLoader,this),this.width=this.settings.size.width,this.height=this.settings.size.height,i.__super__.constructor.call(this,this.settings),this._scalePanel(),(null!=(t=this.settings.elements)?t.length:void 0)&&this._createPersistentLayer(),this.ad.animationMode&&this._setupAnimationMode(),this.ad.eventManager.subscribe("resize:"+this.ad.iid,(n=this,function(){return n._scalePanel(),n.setupPanelSize()}))}return n(i,e),i.prototype._createPersistentLayer=function(){return this.persistentLayer=new t(this,this.settings.elements)},i.prototype._buildFontFace=function(e,t){return"@font-face {\n  font-family: "+e+";\n  src: url("+t+")"+(d.Browser.isIE()?' format("embedded-opentype")':"")+";\n}"},i.prototype._getFontFaces=function(){var e,n,t,i,o,r,s,a,l,u;if(n=[],e=function(e){var t;if(t=u.ad.assets[e])return n.push({fontFamily:t.label.split(".")[0],url:t.url})},(u=this).ad.canvasMode)for(i in r=this.ad.assets)(null!=(s=r[i].contentType)?s.match(/font/):void 0)&&e(i);else for(t=0,o=(l=null!=(a=this.settings.fonts)?a:[]).length;t<o;t++)e(l[t]);return n},i.prototype._getCustomStyleTag=function(){var e,t,n,i,o;for(o='<style id="live-style">',t=0,n=(i=this._getFontFaces()).length;t<n;t++)e=i[t],o+=this._buildFontFace(e.fontFamily,e.url);return o+"</style>"},i.prototype._render=function(){var e,t,n,i,o,r,s,a,l;if(this.ad.iframe?this.ad.$el=this.$el=$('<div class="wrapper spongecell-panel" />').appendTo("body"):"overlay"!==this.expansionType||this.ad.mraid||this.ad.safeFrames?(a=document.getElementById("spongecell-ad-"+this.ad.iid),this.$el=$("<div class='wrapper spongecell-panel "+(null!=(i=this.type)?i:"")+"' />").appendTo(a)):(t=d.Expansion.getDocument(this.expansionType).getElementById("spongecell-overlay-"+this.ad.iid),this.doc=t.contentDocument,this.$el=$(t.contentDocument.body)),d.Browser.isIE()&&this.$el.addClass("ie"),this.vpaid&&(this.$el.addClass("vpaid"),this._setupBorder()),d.Animation&&this._setupAnimation(),null==this.doc&&(this.doc=document),this.setupPanelSize(),this._mapAnimations(),null!=(o=this.persistentLayer)&&o.render(),null!=(r=this.background)&&r.render(),l=this._getCustomStyleTag(),$(l).appendTo("head"),this.ad.screenshotMode&&this.$el.addClass("screenshot-mode"),this.ad.canvasMode)return this.$el.addClass("canvas-mode");for(e=0,n=(s=this.screens).length;e<n;e++)s[e].render();return this.ad.activePanel()===this?this.openInitialScreen():void 0},i.prototype._setup=function(){var e,t,n,i,o,r;if(!window.FontFaceObserver)return Promise.resolve(!0);for(n=[],i=0,o=(r=this._getFontFaces()).length;i<o;i++)t=r[i],e=new FontFaceObserver(t.fontFamily),n.push(e.load());return Promise.all(n)},i.prototype._mapAnimations=function(){var a,e,t,n,i,l;for(i=[],e=0,t=(n=this.screens).length;e<t;e++)l=n[e],i.push(function(){var e,t,n,i,o,r,s;for(s=[],t=0,n=(r=null!=(o=l.animations)?o:[]).length;t<n;t++)a=r[t],null==(e=l.animationsByIid)[i=a.elementIid]&&(e[i]=[]),s.push(l.animationsByIid[a.elementIid].push(a));return s}());return i},i.prototype.removeLoader=function(e){if(!e||!e.toElement||0!==$(e.toElement).find(".spongecell-ad").length||"click"===e.type)return clearTimeout(s),this.$el.off("mouseout",this.removeLoader),$(document.getElementById(r)).remove()},i.prototype.expandPanel=function(){return this.removeLoader(),this.ad.open()},i.prototype.cancelShowLoader=function(){return clearTimeout(l)},i.prototype._scalePanel=function(){var e,t,n,i,o;return this.responsive||this.ad.flexible?(e=this.ad.topWindowDimensions(),d.Browser.isMobile()&&(this.ad.mraid||"overlay"===this.expansionType)?(o=(e.height-this.height)/this.height,i=(e.width-this.width)/this.width):d.Browser.isMobile()||"overlay"!==this.expansionType?(o=(window.innerHeight-this.height)/this.height,i=(window.innerWidth-this.width)/this.width):(t=Math.min(e.height,this.height),n=Math.min(e.width,this.width),o=(t-this.height)/this.height,i=(n-this.width)/this.width),this.scale=i<o?{dimension:"x",magnitude:1+i}:{dimension:"y",magnitude:1+o}):this.scale={magnitude:1}},i.prototype._setupAnimation=function(){return this.$el.addClass("has-animation")},i.prototype._setupAnimationMode=function(){return this.animationsPlayed=0,this.totalAnimations=0},i.prototype._calcTotalAnimations=function(){var e,t,n,i,o,r,s,a,l;if(e=function(e){var t,n,i,o,r;return t=null!=(n=null!=(i=e.animations)?i.length:void 0)?n:0,l.totalAnimations+=t*((null!=(o=null!=(r=e.animationSettings)?r.loops:void 0)?o:0)+1),l.ad.eventManager.subscribe("animationComplete:"+e.iid,l._animationCompleted)},t=(l=this).getScreen(this.ad.animationScreen),this.ad.animationLayout){for(t.setLayoutMode(!0),s=[],i=0,o=(r=t.getFeatureElements()).length;i<o;i++)"mediaCarousel"===(n=r[i]).feature.type&&((a=n.component.slides[0])&&a.iid===this.ad.animationLayout?s.push(e(a)):s.push(void 0));return s}return e(t)},i.prototype._animationCompleted=function(){if(this.animationsPlayed+=1,this.animationsPlayed>=this.totalAnimations)return setTimeout((e=this,function(){return e.ad.eventManager.dispatch("previewComplete")}),1e3);var e},i.prototype._setupBorder=function(){var e,t,n,i;if(!this.canvasMode)return this.ad.border?(t=null!=(n=this.ad.border.thickness)?n:1,e=null!=(i=this.ad.border.color)?i:"transparent",this.$el.css({border:t+"px solid "+e,"box-sizing":"border-box"})):void 0},i.prototype.setupPanelSize=function(){var e;return this.responsive?"overlay"===this.expansionType&&d.Browser.isMobile()?(e=this.ad.topWindowDimensions(),this.$el.width(e.width),this.$el.height(e.height)):"overlay"!==this.expansionType||d.Browser.isMobile()?(this.$el.width(window.innerWidth),this.$el.height(window.innerHeight)):(this.$el.width(this.width),this.$el.height(this.height)):this.vpaid?(this.$el.width("100%"),this.$el.height("100%")):(this.$el.width(this.width),this.$el.height(this.height))},i.prototype.showLoader=function(){var n;if(!(0<$(document.getElementById(r)).length))return setTimeout((n=this,function(){var e,t;return n.$el.off("mouseout",n.cancelShowLoader),s=setTimeout(n.expandPanel,o),(n.width<120||n.height<120)&&(t="-ms-transform: scale("+(e=(Math.min(n.width,n.height)/120).toFixed(1))+","+e+");\n-webkit-transform: scale("+e+","+e+");\ntransform: scale("+e+","+e+");"),n.$el.prepend('<div id="expanding-animation" style="\n  width: '+n.width+"px;\n  height: "+n.height+"px;\n  z-index: "+(+$(n.$el).css("z-index")+1)+';">\n  <div class="expanding-wrapper" '+(t?"style='"+t+"'":"")+' >\n    <div class="round-wrapper">\n      <div class="circle one"></div>\n      <div class="circle two"></div>\n      <div class="circle three"></div>\n      <div class="one number"><span>1</span></div>\n      <div class="two number"><span>2</span></div>\n      <div class="three number"><span>3</span></div>\n    </div>\n    <div class="expanding-text">Expanding</div>\n  </div>\n</div>'),n.$el.on("mouseout",n.removeLoader)}),a)},i.prototype._delegateEvents=function(){var e,t,n,i,o,r;return n=this,e=function(){if(!n.ad.engaged&&(n.ad.engage(),d.Browser.isMobile()))return n.ad.timerStart()},d.Browser.isMobile()?this.$el.on("tap",e):(t=null,"teaser"===this.type&&this.$el.on("mouseover",".hover-expand",(r=this,function(){return l=r.showLoader(),r.$el.on("mouseout",r.cancelShowLoader)})),this.$el.on("mouseover",(o=this,function(){if(clearTimeout(t),!o.ad.timerStarted)return o.ad.track("mouseOver","Background"),o.ad.timerStart()})),this.$el.on("mouseout",(i=this,function(){return t=setTimeout(function(){return i.ad.timerStop()},100)})),d.Engagement.onHover(e)),this.$el.on("mousedown",e)},i.prototype.load=function(){var e,t,n,i,o,r;if(this.$el){for(e=0,t=(i=null!=(n=this.screens)?n:[]).length;e<t;e++)i[e].load();return null!=(o=this.persistentLayer)&&o.load(),null!=(r=this.background)&&r.load(),this.ad.animationMode?this._calcTotalAnimations():void 0}},i.prototype.loadNonHomeElements=function(e){var t,n,i,o,r,s,a,l,u;if(null==e&&(e={}),!this.loadTriggered)for(this.loadTriggered=!0,n=0,o=(s=this.screens).length;n<o;n++)if("home"!==(u=s[n]).iid)for(i=0,r=(a=u.elements).length;i<r;i++)(t=a[i]).loaded||"function"==typeof t.load&&t.load(),e.postRoll&&null!=(l=t.component)&&"function"==typeof l.launch&&l.launch()},i.prototype.openInitialScreen=function(e){return this.ad.animationScreen?null==e&&(e=this.getScreen(this.ad.animationScreen)):null==e&&(e=this.getHomeScreen()),this.openScreen(e,null,null)},i.prototype.openScreen=function(e,t,n){var i,o,r,s,a,l,u,d,c,h;if(null==n&&(n=null),e!==this.currentScreen&&(null==e||!e.animating)){if(this._trackScreenChange(e),t&&t.animations&&!n&&t.restoreElementPositions(),this.vpaid&&"home"===(null!=e?e.iid:void 0)&&t?this.ad.sendVpaidMessage("unpause"):this.vpaid&&"home"!==(null!=e?e.iid:void 0)&&this.ad.sendVpaidMessage("pause"),"none"===(null!=n?n.type:void 0)&&(n=null),this.currentScreen&&null!=(l=this.currentScreen._animationElement())&&l.ended(),t)for(t.startTransition(n,!1),o=0,s=(u=t.getFeatures()).length;o<s;o++)"video"===(i=u[o]).type&&null!=i.postRollPending&&i.cancelPostRoll();else for(n&&null!=(d=this.currentScreen)&&d.startTransition(n,!1),r=0,a=(c=this.screens).length;r<a;r++)(h=c[r])!==e&&h.hide();return e.startTransition(n,!0),this.currentScreen=e,this.updateElementStates()}},i.prototype.openScreenFromAnimation=function(e){var t,n,i,o;if(!this.ad.animationMode)return t=this.currentScreen,(i=this.getScreen(e.toScreen))?setTimeout((o=this,function(){return o.openScreen(i,t,e)}),1e3*parseFloat(null!=(n=e.delay)?n:0)):void 0},i.prototype.updateElementStates=function(){var e,t,n,i,o,r;for(null!=(o=this.persistentLayer)&&o.updateState(),r=[],n=0,i=(t=this.currentScreen.getElements(["customButton"])).length;n<i;n++)e=t[n],r.push(e.updateState());return r},i.prototype._buildFeature=function(e,t){var n,i;return(n=d.AdFeature.create(this.ad,t)).screens=[e],n.layouts=null!=(i=t.layouts)?i:[],n.settings={},this.ad.features.push(n),n},i.prototype._trackScreenChange=function(e){return this.ad.track("screenChange",null,{screen:e.iid},!1)},i.prototype._allElementsByIid=function(){var e,t,n,i,o,r,s,a,l,u,d,c,h,p,g,f;if(t={},this.persistentLayer&&this.persistentLayer.elements)for(n=0,r=(d=this.persistentLayer.elements).length;n<r;n++)t[(e=d[n]).originalIid]=e;if(this.background&&this.background.elements)for(i=0,s=(c=this.background.elements).length;i<s;i++)t[(e=c[i]).originalIid]=e;for(f=[],o=0,a=(h=this.screens).length;o<a;o++)(p=h[o]).elements&&(f=f.concat(p.elements));for(u=0,l=f.length;u<l;u++)t[(g=f[u]).iid]=g;return t},i.prototype.restoreElementPositions=function(){var e,t,n,i,o,r;for(e=this._allElementsByIid(),o=[],t=0,n=(i=this.screens).length;t<n;t++)(r=i[t]).animations&&r.animations.length&&o.push(r.restoreElementPositions(e));return o},i.prototype.refresh=function(e){var t,n,i,o,r;return r=null!=(n=e.settings)?n:{},t=this.responsive?"ResponsiveScreen":"HtmlScreen",null!=r.screen&&r.screen.iid!==(null!=(i=this.canvasScreen)?i.iid:void 0)&&(this.canvasScreen&&this._removeScreen(this.canvasScreen),this.canvasScreen=new d[t](this,r.screen),this.screens.push(this.canvasScreen)),null!=r.elements&&this._resetElements(r.elements),null!=r.feature&&this._resetFeature(r.feature),null!=r.landingPages&&(this._resetLandingPages(r.landingPages),this.canvasScreen&&this._rebuildScreen(this.canvasScreen)),this._rebuildPersistentLayer(r.persistentElements),this._rebuildBackground(r.background),this._rebuildScreen(this.canvasScreen),this._rebuildCSS(r),r.layout&&(this.canvasScreen.setLayoutMode(!0),this._showSlide(null!=(o=r.feature)?o.id:void 0,r.layout)),this.ad.eventManager.dispatch("adShown")},i.prototype.show=function(e){var t;return null!=e.screen&&(null!=(t=this.canvasScreen)?t.iid:void 0)!==e.screen&&this._showScreen(e.screen),e.layout&&this._showSlide(e.feature,e.layout),this.ad.eventManager.dispatch("adShown")},i.prototype.hideOverState=function(e){var t;return(null!=(t=this.getScreen(e.screen))?t.getElement(e.iid):void 0)._toggleState("up")},i.prototype.showOverState=function(e){var t;return(null!=(t=this.getScreen(e.screen))?t.getElement(e.iid):void 0)._toggleState("over")},i.prototype._showScreen=function(e){var t,n;if(null!=this.canvasScreen&&this._removeScreen(this.canvasScreen),null!=(n=this.getScreen(e)))return this._rebuildScreen(n),this.canvasScreen=n,null!=(t=this.persistentLayer)?t.updateState():void 0},i.prototype._showSlide=function(e,r){var s,t,a,l,n,i,o,u;for(u=[],t=0,n=(i=this.canvasScreen.getFeatureElements()).length;t<n;t++)(null!=(o=(s=i[t]).feature)?o.id:void 0)===e?u.push(function(){var e,t,n,i,o;for(n=s.feature.layouts,o=[],a=e=0,t=n.length;e<t;a=++e)l=n[a],r===l.iid?o.push(null!=(i=s.component)?i.navigateTo(a):void 0):o.push(void 0);return o}()):u.push(void 0);return u},i.prototype._rebuildCSS=function(e){var t,i,n,o,r,s,a,l,u,d,c,h,p,g,f,m,v,y,w,b;for(s=0,h=(g=this.canvasScreen.getFeatureElements()).length;s<h;s++)(null!=(f=(r=g[s]).feature)?f.layouts:void 0)&&(c=r.feature.layouts);for(d=[],a=0,p=(m=c||[]).length;a<p;a++)for(l in u=m[a])(b=u[l]).elements&&d.concat(b.elements);return o=(null!=(v=e.elements)?v:[]).concat(d),n=null!=(y=function(){var e,t,n;for(n=[],e=0,t=o.length;e<t;e++)(i=o[e]).css&&n.push(i.css);return n}())?y:[],t=(null!=(w=e.css)?w:"")+n.join(""),$(this.doc.getElementById("live-style")).remove(),this.$el.append(this._getCustomStyleTag()),$(this.doc.getElementById("live-style")).append(t)},i.prototype._rebuildPersistentLayer=function(e){
return null!=e&&(this.settings.elements=e),this.persistentLayer&&this._removeScreen(this.persistentLayer),this._createPersistentLayer(),this._rebuildScreen(this.persistentLayer)},i.prototype._rebuildBackground=function(e){return null!=e&&(this.settings.background=e),this.background&&this._removeScreen(this.background),this.ad._createBackground(this,this.settings.background),this._rebuildScreen(this.background)},i.prototype._rebuildScreen=function(e){var t,n,i;for(this._removeScreen(e),t=0,n=(i=e.elements).length;t<n;t++)i[t].loaded=!1;return e.render(),e.load(),"function"==typeof e.show?e.show():void 0},i.prototype._removeScreen=function(e){if(null!=e.$el)return e.$el.remove(),e.$el=null},i.prototype._resetLandingPages=function(e){var t,n,i,o;for(o=[],t=0,n=e.length;t<n;t++)0!==(i=e[t]).index&&(this.ad.landingPages[i.id]=i.url),null!=i.index?o.push(this.ad.landingPages[i.index]=i.url):o.push(void 0);return o},i.prototype._resetElements=function(e){var t,n,i,o,r,s,a,l,u,d;for(i={},o=0,s=(l=this.canvasScreen.getFeatureElements()).length;o<s;o++)null!=(n=l[o]).feature&&(i[n.feature.id]=n.feature);for(d=[],r=0,a=(this.canvasScreen.elements=e).length;r<a;r++)(t=e[r]).feature?d.push(t.feature=null!=(u=i[t.feature.id])?u:this._buildFeature(this.canvasScreen,t.feature)):d.push(void 0);return d},i.prototype._resetFeature=function(s){var a,e,t,n,l,i,o,r,u;for(t=d.AdFeature.create(this.ad,s),u=[],n=0,i=(o=this.canvasScreen.getFeatureElements()).length;n<i;n++){if((null!=(r=(e=o[n]).feature)?r.id:void 0)===(null!=s?s.id:void 0)&&(null!=s?s.featureType:void 0)){e.feature=t;break}s.destroy?u.push(function(){var e,t,n,i,o,r;for(n=this.canvasScreen.elements||[],r=[],l=e=0,t=n.length;e<t;l=++e)(null!=(a=n[l])&&null!=(i=a.feature)?i.id:void 0)===(null!=s?s.id:void 0)?r.push(null!=(o=this.canvasScreen.elements)?o.splice(l,1):void 0):r.push(void 0);return r}.call(this)):u.push(void 0)}return u},i}(d.AdPanel)}.call(this),function(){"use strict";var e,C;e="undefined"!=typeof global&&null!==global?global:window,(C=null!=e.spongecell?e.spongecell:e.spongecell={}).Renderer=function(){function e(){}return e.normalImage=function(e){return!(e.backgroundType&&"normal"!==e.backgroundType||e.crop)},e.imageCss=function(e,t){var n,i,o,r;if(this.normalImage(e))return null;if(!t)return{};switch(i=function(e){return e+"?cb="+Math.floor(1e13*Math.random())},/\.gif$/.test(t)&&(t=i(t)),r={backgroundImage:"url('"+t+"')"},e.crop||"crop"===e.backgroundType?"crop":e.backgroundType){case"crop":(o=e.cropDimensions)&&(n=-1*o.x+"px "+-1*o.y+"px",r.backgroundPosition=n),r.backgroundSize="auto",r.backgroundRepeat="no-repeat";break;case"fit":r.backgroundSize="contain",r.backgroundRepeat="no-repeat",r.backgroundPosition="50% 50%";break;case"fill":r.backgroundSize="cover",r.backgroundRepeat="no-repeat",r.backgroundPosition="50% 50%";break;case"center":r.backgroundRepeat="no-repeat",r.backgroundPosition="center center";break;case"repeat":r.backgroundRepeat="repeat";break;default:r.backgroundRepeat="no-repeat"}return r},e.imageStyle=function(e,t){var n,i;return n=this.imageCss(e,t),(null!=(i=e.image)?i.backgroundColor:void 0)&&(n.backgroundColor=e.image.backgroundColor),n},e.customButtonHtml=function(e,t){var n,i,o,r,s,a,l;for(l="",o=0,r=(s=["up","over","down"]).length;o<r;o++)i=t[a=s[o]],n=this.normalImage(e)?$('<div>\n  <div class="'+a+'-state button-state"><img onerror="this.style=\'display: none;\'" /></div>\n</div>'):$('<div>\n  <div class="'+a+'-state button-state"></div>\n</div>'),this.imageCss(e,i)?n.find(".button-state").css(this.imageCss(e,i)):n.find("img").attr("src",i),i&&(l+=n.html());return l},e.cssButtonHtml=function(e){var t,n,i,o,r,s;for(t=function(){switch(e.arrow){case 1:return"<div class='sc-triangle'></div>\n<div class='button-semi'></div>";case 2:return'<div class=\'arrow-box arrow-2\'>\n  <?xml version="1.0" encoding="iso-8859-1"?>\n    <svg version="1.1" id="arrow-2-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 31.49 31.49" style="position: absolute;" xml:space="preserve">\n        <path style="fill:#1E201D;" d="M21.205,5.007c-0.429-0.444-1.143-0.444-1.587,0c-0.429,0.429-0.429,1.143,0,1.571l8.047,8.047H1.111\n  C0.492,14.626,0,15.118,0,15.737c0,0.619,0.492,1.127,1.111,1.127h26.554l-8.047,8.032c-0.429,0.444-0.429,1.159,0,1.587\n  c0.444,0.444,1.159,0.444,1.587,0l9.952-9.952c0.444-0.429,0.444-1.143,0-1.571L21.205,5.007z" />\n    </svg>\n</div>';case 3:return"<div class='sc-triangle full'></div>";default:return""}},s="",n=0,i=(o=["up","over"]).length;n<i;n++)r=o[n],s+=$('<div>\n  <div class="'+r+'-state button-state">\n    '+t(r)+"\n  </div>\n</div>").html();return s},e.posterFrameHtml=function(a,e){var t,n,l,u,i,o,r,s,d,c,h,p,g,f,m,v,y,w,b,S,k,_,x;return null==e&&(e=null),x=null!=(p=a.width)?p:a.size.width,d=null!=(g=a.height)?g:a.size.height,l=20,u=30,n={map:"sc-location-icon",video:"sc-play-icon"},{map:"rgb(77,144,254)",video:"rgb(255,255,255)"},null==a.posterFrame&&(a.posterFrame={}),h=n[e.type],i=function(e){var t,n,i,o,r,s;return(d<150||x<150)&&(o=!0),t=Math.min(Math.round(.45*d),100),s=x,n={borderColor:null!=(i=a.posterFrame.icon)?i.color:void 0,fontSize:parseInt(t/2)+"px",height:t,width:t},a.posterFrame.text&&""!==a.posterFrame.text&&(n.top=parseInt(-1*l)+"px",r={width:s,height:l,top:t+u},o&&(r.top=(null!=r?r.top:void 0)-15,r.fontSize="12pt"),e.find(".poster-frame-text").css(r)),o&&(n.borderWidth="3px"),e.find(".pf-icon-placeholder").css(n),e.find(".sc-icon").css({lineHeight:t+"px"})},e.featureType?(o=("function"==typeof e.launchBeforeEngagement?e.launchBeforeEngagement():void 0)&&("function"==typeof e.supportsAutoLaunch?e.supportsAutoLaunch():void 0),s="home"!==(null!=(f=a.container)?f.iid:void 0)&&null==a.container.index&&a.feature.launchOnOrBeforeEngagement()&&("function"==typeof(r=a.feature).supportsAutoLaunch?r.supportsAutoLaunch():void 0)&&!(null!=(m=C.Browser)?m.isMobile():void 0),_=!a.ad.animationMode&&!a.ad.canvasMode&&(o||s)&&!(null!=(v=a.inlineVideo)?v.masterAssetId:void 0)?"display: none;":""):_="",c='<div>\n  <div class="poster-frame '+(null!=(y=null!=e?e.type:void 0)?y:"")+'" style="'+_+'">',!0!==(null!=(w=a.posterFrame.icon)?w.invisible:void 0)&&(c+="<div class='pf-icon-placeholder'>\n  <div class='sc-icon "+h+"'></div>\n</div>\n<div class='poster-frame-text'>"+(null!=(b=null!=(S=a.posterFrame)?S.text:void 0)?b:"")+"</div>"),c+="</div></div>",(t=$(c)).find(".poster-frame").css({color:null!=(k=a.posterFrame.icon)?k.color:void 0}),i(t),t.html()},e.applyCssButtonStyle=function(i,e){var n,t,o,r,s,a,l,u,d,c,h,p,g,f,m,v,y,w,b,S,k,_,x,C,E,P,A;switch(C=1,m=Math.min(null!=(v=i.width)?v:i.size.width,null!=(y=i.height)?y:i.size.height),Math.max(null!=(w=i.width)?w:i.size.width,null!=(b=i.height)?b:i.size.height),function(){return/chrome|crmo|spotify|crios/i.test(navigator.userAgent)},n=function(){return(m*Math.sqrt(2)/2-i.borderWidth)*C},t=function(e){var t;return t={borderLeftColor:i.css[e].stroke,borderTopColor:i.css[e].stroke,borderLeftWidth:i.borderWidth+"px",borderTopWidth:i.borderWidth+"px",width:n(),height:n()},3===i.arrow&&(i.orientation.match(/left|right/)?t.right="50%":"up"===i.orientation?t.top="33%":"down"===i.orientation&&(t.bottom="33%")),t},o=function(){return function(){switch(i.orientation){case"up":return 2===i.arrow?"rotate(-90deg)":"";case"right":return"rotate(0deg)";case"down":return 2===i.arrow?"rotate(90deg)":"";case"left":return"rotate(180deg)";default:return""}}()},r=function(){var e,t,n;return t=$.extend(!0,{},i.css.shadow),2===i.arrow&&i.orientation.match(/up|down/)&&(n=t.x,t.x=t.y,t.y=n),e=s(),t.x*e.x+"px "+t.y*e.y+"px "+t.blur+"px "+t.spread+"px "+t.color},s=function(){if(1===i.arrow)switch(i.orientation){case"right":return{x:1,y:1};case"left":return{x:-1,y:-1};case"up":case"down":default:return{x:1,y:1}}else if(2===i.arrow)switch(i.orientation){case"right":return{x:1,y:1};case"left":return{x:-1,y:-1};case"up":return{x:-1,y:1};case"down":return{x:1,y:-1};default:return{x:1,y:1}}},i.borderWidth=function(){switch(i.arrow){case 1:return 2;case 2:case 3:return 1}}(),i.arrow){case 1:for(C=.7,{},e().addClass(i.orientation),e().find(".button-semi").addClass(i.orientation),e().css({boxShadow:r()}),d=0,p=(S=["up","over"]).length;d<p;d++)P=(E=S[d])+"State",e("."+E+"-state .sc-triangle").css(t(P)),e("."+E+"-state .button-semi").css({backgroundColor:i.css[P].background}),i.orientation.match(/up|down/)&&(A={transform:"rotate("+(u="up"===i.orientation?45:225)+"deg)","-webkit-transform":"rotate("+u+"deg)"},a={right:0,bottom:0,margin:"auto"},e("."+E+"-state .sc-triangle").css(A),e("."+E+"-state .button-semi").css(a));break;case 2:for(e().css({boxShadow:r()}),c=0,g=(k=["up","over"]).length;c<g;c++)P=(E=k[c])+"State",e("."+E+"-state").css({backgroundColor:i.css[P].background,border:i.borderWidth+"px solid "+i.css[P].stroke,borderRadius:"50%"}),e("."+E+"-state path").css({fill:i.css[P].stroke});break;case 3:for(u="up"===i.orientation?45:"down"===i.orientation?225:135,C=.9,h=0,f=(_=["up","over"]).length;h<f;h++)(l=t(P=(E=_[h])+"State")).transform="rotate("+u+"deg)",l["-webkit-transform"]="rotate("+u+"deg)",e("."+E+"-state .sc-triangle").css(l);e(".over-state .sc-triangle").css({borderTopWidth:i.borderWidth+2+"px",borderLeftWidth:i.borderWidth+2+"px"})}return x=o(),e(".arrow-box").addClass(i.orientation),e().css({transform:x,"-webkit-transform":x})},e.normalizeTextStyleObject=function(e){var t,n,i,o,r,s,a,l;if(null!=(a=e.text.style)){for(t in"string"==typeof(l=a.textStyle)&&(e.text.style.textStyle={},e.text.style.textStyle[l]=1),n=e.text.style.textStyle)1!==n[t]&&delete e.text.style.textStyle[t];return a.verticalAlign=null!=(i=a.verticalAlign)?i:"top",(null!=(o=a.lineHeight)?o.toString().match(/^\d+$/):void 0)?(a.lineHeight=parseInt(a.lineHeight,10)/parseInt(a.fontSize,10)*100,a.lineHeight=a.lineHeight/1.2,a.lineHeight=Math.round(a.lineHeight)+"%"):(null!=(r=a.lineHeight)?r.toString().match(/^\d+%$/):void 0)||(a.lineHeight="100%"),a.letterSpacing=null!=(s=a.letterSpacing)?s:"0%"}},e.applyTextStyle=function(e,t){var n,i,o,r,s,a,l,u,d;if(u={bold:["fontWeight","normal","bold"],italic:["fontStyle","normal","italic"],underline:["textDecoration","","underline"],strikethrough:["textDecoration","","line-through"]},null!=(a=$.extend({},e.text.style))){for(o in l=a.textStyle,a.fontSize=a.fontSize?a.fontSize+"pt":"",u)d=u[o],1===(null!=l?l[o]:void 0)?(n=d[2],"textDecoration"===d[0]&&a[d[0]]&&(n=[n,a[d[0]]].join(" "))):n=d[1],null==e.text.fontMode||"monotype"!==e.text.fontMode||"fontWeight"!==d[0]&&"fontStyle"!==d[0]||"normal"===a[d[0]]||(n=a[d[0]]),n&&(a[d[0]]=n);delete a.textStyle,a.lineHeight=1.2*parseInt(a.lineHeight)+"%",t.find(".inner-text-wrapper").addClass(null!=(r=a.verticalAlign)?r:"top"),delete a.verticalAlign,a.letterSpacing=parseInt(a.letterSpacing)/100,a.letterSpacing=Math.round(1e3*a.letterSpacing)/1e3,a.letterSpacing=a.letterSpacing+"em",null!=a.fontColor&&!1===(null!=(s=$.support)?s.opacity:void 0)&&(i=a.fontColor.match(/\d+/g),a.fontColor="rgb("+i.slice(0,3).join(",")+")"),t.find(".inner-text").css(a)}return t},e.applyTextOverflow=function(e){var o,r,s,a,l,u,t,n,i,d,c,h,p;return a=e.element,o=e.el,s=e.selector,r=s.parent(),t=a.magnitude||1,p=null!=(d=$.extend({},a.text.style))?d:{},l=null!=(c=+p.fontSize.toString().replace(/[^0-9]/g,"")*t)?c:12,n=(null!=(h=a.text.overflow)?h.type:void 0)||"autofit",u=function(){var e,t,n,i;return e=s.clone(),o.append(e),e.css({overflow:"hidden",fontSize:l+"pt",fontFamily:p.fontFamily,fontWeight:null!=(t=p.fontWeight)?t:"normal",fontStyle:null!=(n=p.fontStyle)?n:"normal",letterSpacing:null!=(i=r.css("letterSpacing"))?i:"0em",width:a.width||r.css("width"),height:a.height||r.css("height"),visibility:"hidden",opacity:0})},"function"==typeof(i={none:function(){return r.css("overflow","visible")},autofit:function(){var e,t,n,i;t=(e=u())[0],i=n=l,t.scrollWidth>e.width()&&(i=e.width()/t.scrollWidth*l),t.scrollHeight>e.height()&&(n=e.height()/t.scrollHeight*l),0!==(l=Math.min(i,n))&&s.css({fontSize:l+"pt"}),e.remove()},scroll:function(){var e;if(r.css("overflow-y","auto"),r.css("overflow-x","hidden"),(null!=(e=C.Browser)?e.isIE():void 0)&&(r[0].style.flex=1,r[0].style["flex-basis"]=r.width()+"px"),r.css("pointer-events","all"),s.css("height","auto"),s.height()>r.height())return r.removeClass("top middle bottom")},truncate:function(){var t,i,n,o;if(o=a.text.overflow,s.css("max-height","100%"),r.css("pointer-events","all"),n=function(e){var t,n;if(e&&!(s.get(0).scrollHeight<=s.innerHeight())&&(t=$(s.contents().get(-2))).is("br"))return(n=t.get(0).previousSibling)&&3===(null!=n?n.nodeType:void 0)&&n.nodeValue.match(/^\s+$/)&&n.remove(),t.remove()},t=function(){var e,t,n;return t=s.html(),-1!==(n=s.html().lastIndexOf(i.ellipsis))&&(e='... <a href="#" class="ellipsis-cta">'+o.linkCta+"</a>",t=t.substring(0,n)+e+t.substring(n+i.ellipsis.length)),t=t.replace(/\s*<br>\s*/g,"<br>"),s.get(0).innerHTML=t},i={ellipsis:"...",callback:function(e){if($(this).addClass("initialized"),n(e),"link"===o.ellipsisType)return t()}},s.hasClass("initialized")&&(s.trigger("destroy.dot"),s.removeClass("initialized"),s.find(".ellipsis-cta").remove()),"link"===o.ellipsisType&&(i.ellipsis="... "+o.linkCta),s.dotdotdot(i),!s.hasClass("initialized"))return s.trigger("update")}})[n]?i[n]():void 0},e.applyShapeStyle=function(e,o){var t,n,i,r,s,a,l;return r={},t=function(e,t,n){var i;return(i=$.extend({},r)).borderColor=t,i.backgroundColor=n,o.find("."+e+"-state").css(i)},s=function(e){var t,n,i;for(t in e=$.extend(!0,{},e))i=e[t],(i=null!=(n=e[t])?n.toString():void 0).match(/^[\d]{1,3}%$/)||(e[t]=parseInt(i)+"px");return e},null!=(l=e.shape)&&(i=l.border,r.borderWidth=i.width+"px",r.borderStyle="solid",n=s(l.borderRadius),r.borderTopLeftRadius=n.topLeft,r.borderTopRightRadius=n.topRight,r.borderBottomRightRadius=n.bottomRight,r.borderBottomLeftRadius=n.bottomLeft,a=l.shadow,r.boxShadow=a.x+"px "+a.y+"px "+a.blur+"px "+a.spread+"px "+a.color,t("up",i.color,l.background),t("over",l.overState.stroke,l.overState.background)),o},e}()}.call(this),function(){var e;(null!=(e="undefined"!=typeof global&&null!==global?global:window).spongecell?e.spongecell:e.spongecell={}).EventManager=function(){function e(e){this.ad=e,this.subscribers={},this.eventTimes={},this.sortedTimeEvents=[]}var o,r;return["adLoading","adLoaded","clickThrough","screenOpened"],o={vpaid:["adLoaded","clickThrough","played"],externalPage:["previewComplete","adShown"]},r=function(e,t,n){return{action:t,params:n,topic:e}},e.prototype.addTime=function(e){return this.eventTimes[e]=!0,this.sortedTimeEvents=Object.keys(this.eventTimes).sort()},e.prototype.publishTimeEvents=function(e,t,n){var i,o,r,s,a;for(null==n&&(n={}),s=[],i=0,o=(r=this.sortedTimeEvents).length;i<o;i++)(a=r[i])<=t&&!n[a]?(this.publish(e+":"+a),s.push(n[a]=!0)):s.push(void 0);return s},e.prototype.publish=function(e){var t,n,i,o,r;if(this.subscribers[e]){for(o=[],t=0,n=(i=this.subscribers[e]).length;t<n;t++)r=i[t],o.push(r.callback.apply(r.context));return o}},e.prototype.subscribe=function(e,t,n){var i;return null==(i=this.subscribers)[e]&&(i[e]=[]),this.subscribers[e].push({callback:t,context:n})},e.prototype.unsubscribe=function(e){return delete this.subscribers[e]},e.prototype.dispatch=function(e,t){var n,i;for(n in null==t&&(t={}),i=[],o)-1<o[n].indexOf(e)?i.push(this.ad.sendMessage(r(n,e,t))):i.push(void 0);return i},e}()}.call(this),function(){var e,t;e="undefined"!=typeof global&&null!==global?global:window,(t=null!=e.spongecell?e.spongecell:e.spongecell={}).UuidManager=function(){function e(e){this.ad=e,this.viewedUuids={},this.viewedUuidsCache={},this.allUuids=[],this.initialized=!0,this.trackViewed=t.Utils.debounce(this._trackViewed,50,!1)}var w,b;return b=["clickThrough","engagement","mouseOver","itemsRequest","itemsViewed","slideView","start"],w=["engagement","mouseOver"],e.prototype.checkCachedUuid=function(e){return!e||this.viewedUuidsCache[e]},e.prototype.cacheViewedUuid=function(e,t){var n;if(null==(n=this.viewedUuids)[t]&&(n[t]=[]),!(this.checkCachedUuid(e,t)||-1<this.viewedUuids[t].indexOf(e)))return this.viewedUuids[t].push(e)},e.prototype._trackViewed=function(e){var t,n;if(t=this.viewedUuids[e]||[],this.viewedUuids[e]=t.filter((n=this,function(e){return!n.checkCachedUuid(e)})),0!==this.viewedUuids[e].length)return this.ad.track("itemsViewed",null,{trackingKey:e})},e.prototype.cacheUuids=function(e){var t,n,i,o;for(o=[],t=0,i=e.length;t<i;t++)!(n=e[t]).item_id||-1<this.allUuids.indexOf(n.item_id)?o.push(void 0):o.push(this.allUuids.push(n.item_id));return o},e.prototype.getUuids=function(e,t,n){var i,o,r,s,a,l,u,d,c,h,p,g,f,m,v,y;if(o=t.getCurrentCarousel(),m=i=null,"itemsRequest"===e)i=this.allUuids.length?this.allUuids.join(","):null;else if("itemsViewed"===e){for(s=0,u=(i=this.viewedUuids[n.trackingKey]||[]).length;s<u;s++)v=i[s],this.viewedUuidsCache[v]=!0;this.viewedUuids[n.trackingKey]=[]}else i=(null!=(c=t.itemUuids)?c.length:void 0)?t.itemUuids.join(","):null,m=null!=o&&null!=(h=o.slide)?h.itemUuid:void 0;if(i||m)if(o.carousel&&-1<w.indexOf(e)){for(r=null!=(p=o.carousel)?p.slides.map(function(e){return e.itemUuid}):void 0,y=[],l=0,d=(f=null!=(g=t.itemUuids)?g:[]).length;l<d;l++)v=f[l],(r.indexOf(v)<0||v===m)&&y.push(v);y=y.length?y.join(","):null}else y=i;return a={all:y,single:m,screen:t.iid},-1<b.indexOf(e)&&a},e}()}.call(this),function(){var root,spongecell,bind=function(e,t){return function(){return e.apply(t,arguments)}},extend=function(e,t){function n(){this.constructor=e}for(var i in t)hasProp.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;root="undefined"!=typeof global&&null!==global?global:window,spongecell=null!=root.spongecell?root.spongecell:root.spongecell={},spongecell.Ad=function(superClass){function Ad(t){var e;this.receiveMessage=bind(this.receiveMessage,this),this.remove=bind(this.remove,this),spongecell.Console.log("Initializing Ad: %o",t),this.iframe=function(){if(t.canvas||t.animation)return!1;if(null!=t.iframe)return t.iframe;try{return!!spongecell.Net.getParam("sponge",window.location.search.slice(1))}catch(e){return e,!1}}(),this.monotypeFontsManager=spongecell.MonotypeFontsManager?new spongecell.MonotypeFontsManager(t):null,this.animationMode=!!t.animation,this.animationScreen=t.animation,this.animationLayout=t.animation_layout,this.canvasMode=t.canvas,this.screenshotMode=t.screenshot,this.isPreview=null!=(e=t.preview)&&e,this.eventManager=new spongecell.EventManager(this),this.uuidManager=new spongecell.UuidManager(this),spongecell.Browser.isMobile()&&this._setupViewPort(),this._setupChannels()}return extend(Ad,superClass),spongecell.PanelContainer&&Ad.extend(spongecell.PanelContainer),Ad.prototype._createBackground=function(e,t,n){return e.background=new spongecell.Background(e,t,n)},Ad.prototype._createPanels=function(e){var t,n,i,o,r;for(this.panels=[],t=0,n=e.length;t<n;t++)(o=e[t]).ad=this,i=new spongecell.HtmlAdPanel(o),this.panels.push(i),(null!=(r=o.background)?r.length:void 0)&&this._createBackground(i,o.background);return 1<this.panels.length?(this.expansionRequired=!0,this.basePanel=this.panels[0],this.expandable=this.panels[1],this.basePanel.type="teaser",this.expandable.type="expanded"):(this.basePanel=this.panels[0],this.basePanel.type="standard",$(document.body).addClass("spongecell-ad"))},Ad.prototype.activePanel=function(){return this.expansionRequired&&this.opened?this.expandable:this.basePanel},Ad.prototype.loadNonHomeElements=function(e){var t,n,i,o,r;for(null==e&&(e={}),r=[],t=0,n=(o=this.panels).length;t<n;t++)i=o[t],r.push(i.loadNonHomeElements(e));return r},Ad.prototype._setupViewPort=function(){var e,t;return(e=document.querySelector("meta[name=viewport]"))?e.content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1":((e=document.createElement("meta")).name="viewport",e.content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1",null!=(t=document.getElementsByTagName("head")[0])?t.appendChild(e):void 0)},Ad.prototype._setup=function(e){return null==e&&(e={}),spongecell.Console.log("Initializing Ad Settings: %o",$.extend({},e)),this._processAdRevisionSettings(e.adRevisionSettings),this._processSetupSettings(e)},Ad.prototype._processAdRevisionSettings=function(e){if(null==e&&(e={}),this._createPanels(e.panels),this.iframe||(this.$el=$(document.getElementById("spongecell-ad-"+this.iid))),this.expansionRequired)return this._sendExpansionMessage()},Ad.prototype._processSetupSettings=function(r){var e,s,a,t,n,i,o,l,u,d,c,h,p,g,f,m,v,y,w,b,S,k,_,x,C,E,P,A;for(null==r&&(r={}),null==this.iid&&(this.iid=r.iid),this.topDimensions=r.topDimensions,this.border=null!=(h=r.border)?h:{},this.assets=null!=(p=r.assets)?p:{},this._setupLandingPages(r),this.properties={flashData:$.extend(null!=(y=r.flashData)?y:{},{name:"flashData"})},this.api=r.api,this.delayLoading="home"===(null!=(w=r.loading)?w.strategy:void 0),this.creativeSettings=r,this.disableFullScreen=r.disableFullScreen,this.mraid=r.mraid,this.loading=r.loading,this.formatSettings=null!=(b=r.formatSettings)?b:{},this.internalMacros=null!=(S=r.internalMacros)?S:{},this.flexible=this.formatSettings.flexible,this.isCreativeLibrary=null!=(k=null!=(_=r.campaign)?_.creativeLibrary:void 0)&&k,a={},this.features=function(){var e,t,n,i,o;for(o=[],e=0,t=(i=null!=(n=r.features)?n:[]).length;e<t;e++)s=i[e],s=spongecell.AdFeature.create(this,s),a[s.id]=s,o.push(s);return o}.call(this),t=0,o=(x=this.panels).length;t<o;t++)for(c=x[t],null!=(C=this.monotypeFontsManager)&&C.onPanelCreate(c.settings),n=0,l=(g=c.screens).length;n<l;n++){for(i=0,u=(f=(E=g[n]).getFeatureElements()).length;i<u;i++)e=f[i],s=a[e.feature.id],e.feature.vpaid&&(e.vpaid=!0),null!=s&&(e.feature=s,null!=(m=this.monotypeFontsManager)&&m.onFeatureSetup(s));null!=(v=this.monotypeFontsManager)&&v.onScreenSetup(E)}return this.flexible&&spongecell.Event.on(window,"resize",(P=this,function(){return P.eventManager.publish("resize:"+P.iid)})),this.monotypeFontsManager?(d=function(){return A._finishProcessSetupSettings(r)},(A=this).monotypeFontsManager.getMonotypeLoadingPromise().then(d,d)):this._finishProcessSetupSettings(r)},Ad.prototype._setupLandingPages=function(e){var t,n;return null==e&&(e={}),null==this.landingPages&&(this.landingPages={}),this.landingPages=$.extend(null!=(n=e.mergedLandingPages)?n:{},this.landingPages),null==(t=this.landingPages)[0]&&(t[0]=this.landingPages[""]),this.landingPageParams=e.landingPageParams||""},Ad.prototype._finishProcessSetupSettings=function(e){var t,n,i,o,r,s,a,l;for(s=[],t=0,n=(a=this.panels).length;t<n;t++)"overlay"!==(o=a[t]).expansionType&&(r=o.setup(e),s.push(r));return l=this,i=function(){if(l.formatSettings.autoRemove&&l._setupRemoveTimer(),l.canvasMode?l._setupCanvasMode():(l._loadFeatures(),l.expansionRequired&&l._setupExpansion()),l.animationMode)return l._setupAnimationMode()},Promise.all(s).then(i,i)},Ad.prototype._setupViewPort=function(){var e,t;return(e=document.querySelector("meta[name=viewport]"))?e.content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1":((e=document.createElement("meta")).name="viewport",e.content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1",null!=(t=document.getElementsByTagName("head")[0])?t.appendChild(e):void 0)},Ad.prototype._loadFeatures=function(){var e,t,n,i,o,r,s,a,l;if(i=function(){return l._allFeaturesLoaded()},o=function(){return function(){if(0===(s-=1))return i()}},0===(s=(l=this).features.length))return i();for(a=[],t=0,n=(r=this.features).length;t<n;t++)e=r[t],a.push(e.load(o(e)));return a},Ad.prototype._allFeaturesLoaded=function(){var e,t,n,i;for(this.featuresLoaded=!0,this._removeLoader(),e=0,t=(n=this.panels).length;e<t;e++)n[e].load();return this.track("itemsRequest"),this.uuidManager.trackViewed(null!=(i=this.getCurrentScreen())?i.getUniqueTrackingKey():void 0),this.eventManager.dispatch("adLoaded")},Ad.prototype._removeLoader=function(){return this.sendMessage({topic:"loading",action:"removeLoader"})},Ad.prototype._setupChannels=function(){var t,n;return this.iframe?this.iid=spongecell.Net.getParam("sponge",window.location.search.slice(1)):this.iid="undefined"!=typeof impressionTag&&null!==impressionTag?impressionTag.studioTag.iid:void 0,null==spongecell.adTags&&(spongecell.adTags={}),spongecell.adTags[this.iid]=this,spongecell.Event.addMessageListener((t=this,function(e){return t.receiveMessage(e)})),window.setTimeout((n=this,function(){return n.sendMessage({topic:"setup",callback:function(e){return n._setup(e)}})}))},Ad.prototype._setupCanvasMode=function(){var e,t,n;return this.$el.addClass("sc-canvas-mode"),this.delayLoading=!1,this._removeLoader(),null!=(e=this.basePanel.persistentLayer)&&e.load(),null!=(t=this.basePanel.background)&&t.load(),spongecell.Broker.registerClient("canvas",(n=this,function(e){return n._handleCanvasMessage(e)}))},Ad.prototype._setupAnimationMode=function(){return this.$el.addClass("sc-animation-mode")},Ad.prototype.remove=function(){if(!this.canvasMode)return this.mraid?this.mraidRequest("close"):this.formatSettings.autoRemove?this.sendMessage({topic:"nav",action:"remove"}):this.sendMessage({topic:"nav",action:"close"})},Ad.prototype.openLink=function(e){return this.mraid?this.mraidRequest("openLink",e):window.open(e)},Ad.prototype.mraidRequest=function(e,t,n){return this.sendMessage({topic:"mraid",fn:e,params:t,callback:n})},Ad.prototype.engage=function(){var e,t,n;if(!this.canvasMode)return this.$el.find(".outer-wrapper").remove(),this.track("engagement"),e=!this.engaged,this.engaged=!0,null!=(n=this.getCurrentScreen())&&"function"==typeof n.engage&&n.engage(),this.delayLoading&&e&&this.loadNonHomeElements(),(null!=(t=this.interstitial)?t.removeTimeout:void 0)?this._backgroundEngage():void 0},Ad.prototype.track=function(e,t,n,i){var o;return null==n&&(n={}),null==i&&(i=!0),this.eventManager.dispatch(e,n),o=this.uuidManager.getUuids(e,this.getCurrentScreen(),n),i&&o&&(n.uuids=o),this.sendMessage($.extend(n,{topic:"tracking",action:e,feature:t}))},Ad.prototype.trackOpen=function(){return this.track("EXPANSION",null)},Ad.prototype.trackClose=function(){return this.track("INTERACTION",null,{description:"Collapse"}),this.timerStop()},Ad.prototype.trackClickThrough=function(e,t,n){return null==n&&(n={}),null==n.landingPage&&(n.landingPage={}),n.landingPage.url=e,null==n.description&&(n.description="Clicked "+t),this.track("clickThrough",t,n)},Ad.prototype.clickThrough=function(e,t,n,i){var o,r,s;if(null==t&&(t={}),null==n&&(n=null),null==i&&(i=null),!this.animationMode)return!!(s=i||(null!=(r=t.landingPage)?r.url:void 0))&&(s.substr(-this.landingPageParams.length)!==this.landingPageParams&&(s=spongecell.Net.appendQueryParamsToUrl(s,this.landingPageParams)),null!==n?(o={data:{url:s=spongecell.Net.appendQueryParamsToUrl(s,n.queryParams)},callback:n.callback},this._sendAnimationMessage(o,n)):this.openLink(s),this.trackClickThrough(s,e,t),this.closeOnClickThrough&&this.close(),this.timerStop())},Ad.prototype.completionClickThrough=function(e,t,n,i){return null==t&&(t={}),null==n&&(n=null),null==i&&(i=null),this.clickThrough(e,t,n,i),this.track("completion",e,t)},Ad.prototype.timerStart=function(){return this.timerLocked||this.track("timeStart"),this.timerStarted=!0},Ad.prototype.timerStop=function(){return this.timerLocked||this.track("timeStop"),this.timerStarted=!1},Ad.prototype.timerLock=function(){return this.timerLocked=!0},Ad.prototype.timerUnlock=function(){if(this.timerLocked=!1,!this.timerStarted)return this.timerStop()},Ad.prototype._backgroundEngage=function(){var e;if(clearTimeout(this.interstitial.removeTimeout),this.interstitial.engageTimer)return e=this.interstitial.engageTimer-(new Date-this.interstitial.removeTimerStart),setTimeout(this.remove,e)},Ad.prototype._setupRemoveTimer=function(){if(this.mraid&&this.formatSettings.useCustomClose&&this.mraidRequest("useCustomClose",!0),this.interstitial={},!this.formatSettings.killTimer)return this.interstitial.removeTimer=1e3*this.formatSettings.initialTimer,this.interstitial.engageTimer=this.formatSettings.engageTimer?1e3*this.formatSettings.engageTimer:null,this.interstitial.removeTimeout=setTimeout(this.remove,this.interstitial.removeTimer),this.interstitial.removeTimerStart=new Date},Ad.prototype.sendMessage=function(e){var t,n,i,o,r;if(null==e&&(e={}),e.iid=this.iid||"OVERRIDE",spongecell.Console.log("Sending message from Ad: %o",e),e.callbackFn=e.callback,spongecell.Utils.isFunction(e.callback)&&(e.callback=spongecell.Broker.registerCallbackFn(e.callback)),this.iframe)return this._sendMessage(parent,e);for(spongecell.Broker.sendOnChannel(e,e.callbackFn),r=[],t=0,i=(o=$("iframe")).length;t<i;t++)n=o[t],r.push(this._sendMessage(n.contentWindow,e));return r},Ad.prototype._sendMessage=function(e,t){return null==t&&(t={}),t=JSON.stringify(t),e.postMessage(t,"*")},Ad.prototype.receiveMessage=function(e){return spongecell.Console.log("Ad Receiving message: %o",e),"nav"===e.topic?this._handleNavMessage(e):"tracking"===e.topic?this._handleTrackingMessage(e):"setup"===e.topic?this._handleSetupMessage(e):"vpaid"===e.topic?this._handleVPAIDMessage(e):this._evaluateMessageCallback(e)},Ad.prototype._evaluateMessageCallback=function(message){var base;return null!=this[message.callback]&&(message.callback=spongecell.Broker.registerCallbackFn(this[message.callback])),"function"==typeof(base=eval(message.callback))?base(message.response):void 0},Ad.prototype._handleNavMessage=function(n){var e,i,t,o,r,s,a,l,u;if(i=this.getCurrentScreen(),n.screen)return n.engage&&!this.engaged&&this.engage(),i&&(null!=(r=i._animationElement())&&r.ended(),n.engage&&i.trackStart()),null!=(t=this.getScreenByName(n.screen))&&null!=(s=t.panel)?s.openScreen(t,null,n.transition):void 0;if(n.engagement){if(!this.engaged)return this.engage()}else{if(n.landingPage)return this.engaged||this.engage(),o="__default"===n.landingPage?(e=null!=i?i._animationElement():void 0,null!=i?i.getLandingPage(e.action):void 0):null!=n.landingPage.itemIndex?null!=i?i.getLandingPage(n.landingPage):void 0:(null!=(l=this.landingPages[n.landingPage.id])||(l=n.landingPage.url),{url:l}),(null!=n?n.urlOverride:void 0)?this.sendMessage({topic:"setup",action:"process_landing_page",url:n.urlOverride,callback:(u=this,function(e){var t;return u.completionClickThrough(null!=i?i.getTrackingKey():void 0,{description:"Clicked "+(null!=i&&null!=(t=i._animationElement())?t.name:void 0),partition:null!=i?i.getTrackingKey():void 0,landingPage:o,baseFeature:"screen"},n,e)})}):this.completionClickThrough(null!=i?i.getTrackingKey():void 0,{description:"Clicked "+(null!=i&&null!=(a=i._animationElement())?a.name:void 0),partition:null!=i?i.getTrackingKey():void 0,landingPage:o,baseFeature:"screen"},n);if(!n.panel)return this._evaluateMessageCallback(n);if(n.panel.close)return this.close();if(n.panel.open)return this.open()}},Ad.prototype._handleSetupMessage=function(e){var t;return"api"===e.type?(t={data:this.apiSetupOptions(),callback:e.callback},this._sendAnimationMessage(t,e)):"update_landing_pages"===e.type?this._setupLandingPages(null!=e?e.data:void 0):this._evaluateMessageCallback(e)},Ad.prototype._handleVPAIDMessage=function(e){return this.processVideoEvent(e),this.sendVpaidMessage("actionComplete",e)},Ad.prototype._handleTrackingMessage=function(e){var t,n,i;if(e.viewedItem)return i=null!=(t=this.getElementByIid(e.iid))&&null!=(n=t.container)?n.getUniqueTrackingKey():void 0,this.uuidManager.cacheViewedUuid(e.viewedItem.itemUuid,i),this.uuidManager.trackViewed(i)},Ad.prototype.sendVpaidMessage=function(e,t){return null==t&&(t={}),this.sendMessage({topic:"vpaid",action:e,callbackString:t.callback})},Ad.prototype._sendAnimationMessage=function(e,t){var n,i,o;return i=t.iid,e.callbackParams=t.callbackParams||{},null==(n=document.getElementById("animation-"+i))&&(n=null!=(o=this.expandable)?o.doc.getElementById("animation-"+i):void 0),null!=n?n.contentWindow.postMessage(e,"*"):void 0},Ad.prototype._handleCanvasMessage=function(e){var t;switch(spongecell.Console.log("Ad Receiving Canvas message %o",e),e.action){case"refresh":return this.basePanel.refresh(e);case"showOverState":return this.basePanel.showOverState(e);case"hideOverState":return this.basePanel.hideOverState(e);case"show":return this.basePanel.show(e);case"update":return this.assets=e.assets;case"hideElement":if(this.$el.find("#elem-"+e.element).hide(),null==this.lockedElements&&(this.lockedElements={}),e.locked)return this.lockedElements[e.element]=!0;break;case"showElement":return this.$el.find("#elem-"+e.element).show(),null==this.lockedElements&&(this.lockedElements={}),this.lockedElements[e.element]=!1;case"onLayoutMode":
return null!=(t=this.getScreenByName(e.screen))?t.setLayoutMode(!0):void 0;case"offLayoutMode":return null!=(t=this.getScreenByName(e.screen))?t.setLayoutMode(!1):void 0}},Ad.prototype.apiSetupOptions=function(){var e,t,n,i,o,r,s;for(t in e={assets:{},landingPages:{},properties:{},spongecellParams:this.internalMacros},i=this.assets)n=(s=i[t]).label?s.label:s.name,e.assets[n]=s;for(t in o=this.properties)s=o[t],e.properties[s.name]=s;for(t in r=this.api.landingPages)s=r[t],this.landingPages[s.id]&&(s.url=this.landingPages[s.id]),e.landingPages[t]=s;return this.dynamicItems&&(e.dynamicItems=this.dynamicItems),e},Ad.prototype.getCurrentScreen=function(){var e,t,n;return null!=(e=null!=(t=this.activePanel())?t.currentScreen:void 0)?e:null!=(n=this.activePanel())?n.getHomeScreen():void 0},Ad.prototype.getScreenByName=function(e){var t,n,i,o,r,s,a;for(t=0,i=(r=this.panels).length;t<i;t++)for(n=0,o=(s=r[t].screens).length;n<o;n++)if((a=s[n]).name===e)return a},Ad.prototype.getElementByIid=function(e){var t,n,i,o,r,s,a;for(n=0,o=(s=this.panels).length;n<o;n++)for(i=0,r=(a=s[n].screens).length;i<r;i++)if(t=a[i].getElementByIid(e))return t;return null},Ad.prototype.topWindowDimensions=function(){var e;return this.mraid&&this.topDimensions?this.topDimensions:{width:(e=spongecell.Expansion.getWindow()).innerWidth,height:e.innerHeight}},Ad}(spongecell.Module)}.call(this);
(function(){var e,l,t=function(e,t){function n(){this.constructor=e}for(var l in t)o.call(t,l)&&(e[l]=t[l]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;e="undefined"!=typeof global&&null!==global?global:window,(l=null!=e.spongecell?e.spongecell:e.spongecell={}).HtmlImageElement=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.$elem=function(){return l.Renderer.normalImage(this)?$('<div class="image-element"><img onerror="this.style=\'display: none;\'" /></div>'):$('<div class="image-element"></div>')},n.prototype.load=function(){var e,t;n.__super__.load.apply(this,arguments),t=this.container.getAssetUrl(this.image),e=l.Renderer.imageStyle(this,t),(null!=t?t.match(/.*\.spongecell\.com\/img\/.*\/original.png$/):void 0)&&(t=t.replace("/original.png","/"+this.width+"-"+this.height+".png")),l.Renderer.normalImage(this)?this.$().find("img").attr("src",t):this.$().css(e)},n}(l.HtmlElement)}).call(this);
var vendorClass = typeof spongecell['AdSc'] === 'function' ? spongecell['AdSc'] : spongecell.Ad
spongecell.studioAd = new vendorClass({});

